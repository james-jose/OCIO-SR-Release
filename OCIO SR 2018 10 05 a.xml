<?xml version="1.0" encoding="UTF-8"?>
<unload unload_date="2018-10-05 06:07:01">
<sys_remote_update_set action="INSERT_OR_UPDATE">
<application display_value="Global">global</application>
<application_name>Global</application_name>
<application_scope>global</application_scope>
<application_version/>
<collisions/>
<commit_date/>
<deleted/>
<description>Merged following update sets
OCIO SR SB-880 Variable Type-v01
OCIO SR Request Detail Widget Instance SB873
OCIO SR SB-875 SM View-v01
OCIO SR SB-856 Sec_Secu-v01
OCIO SR Assign Sector for IIO SB882
OCIO SR SB-SB-876 Req For check-v01
OCIO SR SB-SB-876 Req For check-v02</description>
<inserted/>
<name>OCIO SR 2018 10 05 a</name>
<origin_sys_id/>
<parent display_value=""/>
<release_date/>
<remote_base_update_set display_value=""/>
<remote_parent_id/>
<remote_sys_id>d48d3748db49e780fe199236db9619b4</remote_sys_id>
<state>loaded</state>
<summary/>
<sys_class_name>sys_remote_update_set</sys_class_name>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>6b9d7b08db49e780fe199236db961950</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<update_set display_value=""/>
<update_source display_value=""/>
<updated/>
</sys_remote_update_set>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_7801f2a5db1f13003d1dd001cf961985</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Change Account"&gt;d401be25db1f13003d1dd001cf9619a2&lt;/cat_item&gt;&lt;cat_variable/&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Default Fields From Current User&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Set Default values using the current logged-In User
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-47  27-Jun-2018  James Jose      Initial implementation
 * SB-470 13-Sep-2018  Munhwan Gim     Add today Date
 *
 **/
function onLoad() {

	//Set organization based on the user
	var userID = g_user.userID;
	//Get value from script include at the server side
	var ga = new GlideAjax('OCIO_SR_HelperUtils');
	ga.addParam('sysparm_name', 'ajaxFtn_getUserById');
	ga.addParam('sysparm_src_sysid', userID);
	ga.getXMLAnswer(cbFtn);

	function cbFtn(answer) {
		if (answer) {
			
			console.info('&gt;&gt;&gt;ChangeAccount, onLoad() = ' + answer);
			
			var retObj = JSON.parse(answer);
			
			//Set short description of task
			var sc_item_request_display_name = 'Change Account for '+ retObj.username;
			g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);
			//Set Requested for organization
			g_form.setValue('u_organization', retObj.company);
			
			//g_form.setValue('u_effective_date', "20 Jan 2019");
			g_form.setValue('u_effective_date', retObj.todayDate, retObj.todayDate);
		}
	}

}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-14 16:33:19&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;7801f2a5db1f13003d1dd001cf961985&lt;/sys_id&gt;&lt;sys_mod_count&gt;15&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Default Fields From Current User&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_7801f2a5db1f13003d1dd001cf961985&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 04:24:02&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onLoad&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1959957915</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>239d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1664277d7ed0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Default Fields From Current User</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>8f06a7442b09e7803532430e5045f0a6</update_guid>
<update_guid_history>8f06a7442b09e7803532430e5045f0a6:-1959957915,7880fa46edf4a380505a280dfbdabf1b:-1755331650,2500f246fbf4a38081ac256a9810dc7f:-642129920,6b5faa06a7f4a380264a1289b57b3498:1822436259,d742d6513e246740bac9d389fbcbe7ae:-1755331650,68819a117724674029c6ef1e6d7ddaa2:-1577268752,4a31da110924674092233d6b2685ea92:-333251196,eef09211f02467404f4462034c2490d1:-594351091,2dc09211b824674041c253606a4235cb:-834496465,65509a5d54e0674090d3451f6cff2aa4:-167955177,b5009add7fe067408eb2d6be5e68e8aa:713737807,7efe829dbfe06740f4d3c9cb9a972664:1011130727,348d0a5d4de06740b74ba892445ced7d:-2062663241,a5fb02d9a4e06740c77bf5ed4e989f20:-1150331908,8cf806d92ae067406d382cc961457c13:1204390229,a538ca9930e0674053cdbeaaa7290785:-1806365792,96f3d19581606740cefb3889630ac71b:1996255943,dc5dcfe461a8e340f82d8f53795329b3:248161237,7801f2a5481f1300d662beb7aabe4087:54617293</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_b965f79edb30638050479eb6db9619fa</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;sc_request&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="sc_request"&gt;opened_byVALCHANGES^opened_byISNOTEMPTY^EQ&lt;item endquery="false" field="opened_by" goto="false" newquery="false" operator="VALCHANGES" or="false" value=""/&gt;&lt;item endquery="false" field="opened_by" goto="false" newquery="false" operator="ISNOTEMPTY" or="false" value=""/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OCIO SR Set Company&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

//set org as the requested by org
	
current.company=current.opened_by.company+'';
	


})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-09-29 19:01:58&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;b965f79edb30638050479eb6db9619fa&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO SR Set Company&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_b965f79edb30638050479eb6db9619fa&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 01:12:09&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=b965f79edb30638050479eb6db9619fa"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-643363682</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>239d7b08db49e780fe199236db961955</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641c82c290000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table>sc_request</table>
<target_name>OCIO SR Set Company</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>9c2a3a8c62cd27804d70ed3682616028</update_guid>
<update_guid_history>9c2a3a8c62cd27804d70ed3682616028:-643363682,e481e4e694b0638047de62bc2c39c9f0:1444772818,5de0e866dfb06380a6ba4d6bf261d249:-1591181953,fd3024667db06380d4fd7a21dd17cc3c:1942482938,f03d7bd20a706380eb93114c30af1bca:726139290,949cf3de1c3063805426911d480f9486:370806005,a385b7de60306380a3d517b1b8379a75:-1460784111,c17573de3a3063807c804f61b7362e38:926360910</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_55d0620cdb8d278050479eb6db961958</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Reset Voice Mail Password"&gt;fa2cbd7bdb961300f72fe04a4896197a&lt;/cat_item&gt;&lt;cat_variable&gt;IO:33ec31bbdb961300f72fe04a489619bc&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Validate ReqFor&lt;/name&gt;&lt;order&gt;210&lt;/order&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading) {
   if (isLoading || newValue == '') {
      return;
   }
// var cart_id = g_form.getValue('cart_sys_id');
 var req_for = g_form.getValue('u_requested_for');
	
    var ga = new GlideAjax("OCIO_SR_CatalogHelper");
	ga.addParam("sysparm_name","cart_info");
	ga.addParam("sysparam_reqFor",req_for);
	ga.addParam("sysparam_oldValue",oldValue);
	ga.getXML(ajaxResponse);   
}

function ajaxResponse(serverResponse) {
	
	var result = serverResponse.responseXML.getElementsByTagName("result");
	var cart_eva_result = result[0].getAttribute("cart_eva_result");
	var cart_old_reqfor =result[0].getAttribute("cart_old_reqfor");
	
	if(cart_eva_result=="invalid"){
	
	alert("Invalid selection, requested for should be from the same org as the user in cart");

	g_form.setValue('u_requested_for', cart_old_reqfor);
//	g_form.showFieldMsg('u_requested_for', 'Please select user from same org as in cart','error',true);
	if(cart_old_reqfor==''){
	

g_form.setValue('u_organization', '');
	

}

	}
	
}
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 23:21:38&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;55d0620cdb8d278050479eb6db961958&lt;/sys_id&gt;&lt;sys_mod_count&gt;4&lt;/sys_mod_count&gt;&lt;sys_name&gt;Validate ReqFor&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_55d0620cdb8d278050479eb6db961958&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 02:30:06&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>1054901016</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>279d7b08db49e780fe199236db961951</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166420f8abf0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Validate ReqFor</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>dafb8b4496c5e780083802c746d92bbd</update_guid>
<update_guid_history>dafb8b4496c5e780083802c746d92bbd:1054901016,8166bec809cd27807961b642039a0d33:756409761,5a063ec893cd2780f12a01a53a77b46f:-1182687427,14f5bac889cd2780fe73dde7477b491a:-2045990410,1dd0620c8e8d2780c5d30a9492e0d15a:-1366883649</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_13db46ed4f802300c8030fbf9310c713</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;standard&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function ($scope, $location, spUtil, amb, $http, spAriaUtil, $timeout, spNavStateManager, $anchorScroll) {
	var c = this;
	

	if(localStorage.getItem('rowID')) {
	var idClicked =  localStorage.getItem('rowID');//'3831b225c3111200a125dbfd81d3ae9b'; 		
	gotoAnchor(idClicked);
		
	}
	function gotoAnchor(x) {	
	 $timeout(function() {
		  $anchorScroll(x);
		//  $location.hash(old);		
	localStorage.clear();
            },500);	
		 
    };
	//	alert(document.getElementById('clickedElement').value);
	
	/*
	 * options:
	 * hide_footer (bool) = true to remove the data table footer contents
	 * hide_header (bool) = true to remove the data table header contents
	 * show_new (bool) = true to show the "New" record button
	 * show_keywords (bool) = true to show the keyword search field
	 * table (string) = the table name to query
	 * filter (string) = the encoded query
	 * o (string) = the order by column
	 * d (string) = The order by direction: asc or desc
	 * p (int) = the page to jump to
	 * fields (string) = comma seperated list of fields that become the list columns
	 * view (string) = the default view to load for columns, overrides fields
	*/
	$scope.exportTypes = [{label:'PDF', value: 'PDF'}, {label:'Excel', value:'EXCEL'}, {label:'CSV', value:'CSV'}];
	var keys = ['table', 'filter', 'p', 'o', 'd'];

	var eventNames = {
		click: 'data_table.click',
		setFilter: 'data_table.setFilter',
		setKeywords: 'data_table.setKeywords'
	};

	$scope.go = function(table, item) {
		spNavStateManager.onRecordChange(table).then(function() {
		var parms = {};
		parms.table = table;
		parms.sys_id = item.sys_id;
		parms.record = item;
		$scope.ignoreLocationChange = true;
		for (var x in c.data.list) {
			c.data.list[x].selected = false;
		}
		item.selected = true;
			//wsib custom code
			localStorage.setItem('rowID',item.sys_id);
			//gotoAnchor(item.sys_id);
		//	document.getElementById('clickedElement').value = item.sys_id;
			//alert(document.getElementById('clickedElement').value);
			
		$scope.$emit(eventNames.click, parms);
		}, function() {
			// do nothing in case of closing the modal by clicking on x
		});	
	};

	
	
	$scope.newRecord = function(){
		var parms = {
			id: 'form',
			table: $scope.data.table,
			view: $scope.data.view,
			sys_id: '-1'
		};
		if ($scope.data.filter != '')
			parms.query = $scope.data.filter;

		$location.search(parms);
	};

	function recoverStateFromUrl() {
		$scope.data.fields = [];
		var s = $location.search();
		for (var x in keys) {
			if (s[keys[x]]) {
				$scope.data[keys[x]] = s[keys[x]];
			}
		}
		$scope.server.update().then(function(data) {
			if (s.sys_id) {
				for (var x in data.list) {
					if (data.list[x].sys_id == s.sys_id) {
						$scope.go(s.table, data.list[x]);
					}
				}
			}
		});
	}

	if ($scope.options.fromUrl) {
		var origSearch = $location.search();
		$scope.$on('$locationChangeSuccess', function(e) {
			var s = $location.search();
			if (origSearch.id !== s.id)
				return;

			if ($scope.ignoreLocationChange){
				$scope.ignoreLocationChange = false;
				return;
			}

			// Helps to recover state when using the browser's back button
			recoverStateFromUrl();
		});
	}


	$scope.getNumber = function(num) {
		return new Array(num);
	}

	$scope.mathMin = function(v1,v2) {
		return Math.min(v1,v2);
	}

	function getData(updateUrl) {
		var f = $scope.data;
		spUtil.update($scope).then(function(data) {
			f.view = data.view;
			if ($scope.options.fromUrl &amp;&amp; updateUrl)
				setPermalink(f.table, f.filter, f.o, f.d, f.p);

			if ($scope.options.show_breadcrumbs &amp;&amp; data.filterBreadcrumbs)
				$scope.$broadcast('widget-filter-breadcrumbs.setBreadcrumbs', data.filterBreadcrumbs.data, data.filter);

			initRecordWatcher(f.table, f.filter);
		});
	}

	function setPermalink(table, filter, orderBy, orderDirection, page){
		$scope.ignoreLocationChange = true;
		var search = $location.search();
		angular.extend(search, {
			spa: 1,
			table: table,
			filter: filter,
			p: page,
			o: orderBy,
			d: orderDirection
		});
		$location.search(search);
	}

	var watcher;
	function initRecordWatcher(table, filter){
		if (watcher)
			watcher.unsubscribe();

		if (table &amp;&amp; filter) {
			var watcherChannel = amb.getChannelRW(table, filter);
			amb.connect();
			watcher = watcherChannel.subscribe(function(message) {
				if (!message.data)
					return;
				switch(message.data.action) {
					case "change":
						updateRowFromRW(message);
						break;
					case "exit":
						// A record was removed
					case "enter":
						// A record was added
					default:
						spUtil.update($scope);
						break;
				}
			});
		}
	}

	function updateRowFromRW(message) {
		if (message.data &amp;&amp; message.data.sys_id &amp;&amp; $scope.data.list) {
			var row, field;
			for(var i=0;i&lt;$scope.data.list.length; i++) {
				row = $scope.data.list[i];
				if (row.sys_id == message.data.sys_id) {
					var fields = Object.getOwnPropertyNames(message.data.record);
					for(var f in fields) {
						field = fields[f];
						if(typeof row[field] !== 'undefined') {
						    row[field].display_value = message.data.record[field].display_value;
						}
					}
				}
			}
		}
	}

	$scope.$on('$destroy', function() {
		if (watcher)
			watcher.unsubscribe();
	});

	$scope.setPageNum = function(num) {
		$scope.data.p = num;
		getData(true);
		$timeout(function() {
			$scope.focusOnTableHeader();
		});
	}

	$scope.setOrderBy = function(field) {
		var d = "asc";
		if ($scope.data.o == field) {
			if ($scope.data.d == "asc")
				d = "desc";
			else
				d = "asc";
		}

		if (d === "asc") {
			spAriaUtil.sendLiveMessage($scope.data.msg.sortingByAsc);
		} else if (d === "desc") {
			spAriaUtil.sendLiveMessage($scope.data.msg.sortingByDesc);
		}

		$scope.data.o = field;
		$scope.data.d = d;
		$scope.setSearch(true);
	}

	$scope.setSearch = function(updateUrl) {
		$scope.data.p = 1;
		getData(updateUrl);
	}

	$scope.$on(eventNames.setFilter, function(e, newFilter){
		$scope.data.filter = newFilter;
		$scope.setSearch(false);
	});

	$scope.$on(eventNames.setKeywords, function(e, keywords){
		$scope.data.keywords = keywords;
		$scope.setSearch(false);
	});

	$scope.$on('widget-filter-breadcrumbs.queryModified', function(e, newFilter){
		$scope.data.filter = newFilter;
		$scope.setSearch(true);
	});

	$scope.rowsWerePruned = function() {
		if (!$scope.data.list)
			return;

		$scope.rowsPruned = $scope.mathMin($scope.data.window_end,$scope.data.row_count) - $scope.data.window_start - $scope.data.list.length;
		return $scope.rowsPruned &gt; 0;
	}

	$scope.showFilter = function() {
		return !$scope.data.list.length &amp;&amp; !$scope.data.num_pages &amp;&amp; !$scope.data.invalid_table &amp;&amp; !$scope.loadingData;
	}

	c.appendQuery = function(query){
		if ($scope.data.filter.length &gt; 1)
			$scope.data.filter += '^';
		$scope.data.filter += query;
			$scope.setSearch();

	}

	// Makes Widget Async
	var title = $scope.options.title;
	if ($scope.options.use_instance_title === 'false')
		title = $scope.title;
	$scope.data = $scope.options;
	$scope.loadingData = true;
	$scope.server.update().then(function() {
		if ($scope.data.newButtonUnsupported)
			console.log("Service Portal: New button not supported for sys_attachment list");
		$scope.data.title = title;
		$scope.loadingData = false;
		initRecordWatcher($scope.data.table, $scope.data.filter);
	});

	function parseQuery(table, queryString){
		return $http.post('/api/now/sp/parsequery/' + table, queryString).then(function(response){
				return response.data.result;
		});
	}

	c.createQueryTerm = function(table, field, sys_id, operator){
		return $http.get('/api/now/sp/getInOutQueryTerm', {
			params: {
				table: table,
				sys_id: sys_id,
				field: field,
				operator: operator
			}
		}).then(function(response){
			if (response &amp;&amp; response.data &amp;&amp; response.data.result)
				return response.data.result.parts;
		});
	}

	c.showMatching = function(field, newTerm) {
		var queryString = $scope.data.filter;
		var eq = "";
		parseQuery($scope.data.table, queryString).then(function(oldTerms) {
			for(var i=0; i&lt;oldTerms.length; i++){
				var term = oldTerms[i];
				if (isSameField(newTerm, term))
					continue;

				if (eq.length)
					eq += '^';

				eq += getEncodedTerm(term);
			}
			if (eq.length)
					eq += '^';
			eq += getEncodedTerm(newTerm);

			$scope.data.filter = eq;
			$scope.setSearch();
		});
	};

	c.filterOut = function(field, newTerm) {
		var eq = $scope.data.filter;
		if (eq.length)
					eq += '^';

		eq += getEncodedTerm(newTerm);
		$scope.data.filter = eq;
		$scope.setSearch();
	};

	function isSameField(t1, t2) {
		if ('left' in t1 &amp;&amp; 'left' in t2)
			return t1.left.field === t2.left.field;
		else if ('left' in t1)
			return t1.left.field === t2.field;
		else if ('left' in t2)
			return t1.field === t2.left.field;
		return t1.field === t2.field;
	}

	function getEncodedTerm(term) {
		var eq;
		if (term.left) {
			eq = getEncodedTerm(term.left);
			eq += '^OR';
			eq += getEncodedTerm(term.right);
		} else {
			eq = term.field;
			eq += term.operator;
			eq += term.value;
		}
		return eq;
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.panel-heading {
  padding-left: 8px;
}

thead {
  border-bottom: 1px solid #ddd;
}

table {
  margin-bottom: 0;
}

.table &amp;gt; thead &amp;gt; tr &amp;gt; th {
  border: 1px solid #ddd;
  cursor: pointer;
  vertical-align: middle;

  &amp;amp;:nth-child(2) {
    border-left: none;
  }



  &amp;amp;:last-child {
    border-right: none;
  }
}

th i {
  display: inline-block;
  margin-left: 5px;
  color: #A0A0A0;
}

th .disabled{
  color:#ddd;
}

.th-title {
  display: inline-block;
  color: $primary;
}

.panel-body {
  overflow: auto;
  padding: 0px;
}


.selected {
  color: #fff;
  background-color: #909090;
  border-color: 1px solid #fff;
}

tbody tr:last-child {
  border-bottom: none;
}

.pruned-msg {
  padding-bottom: 10px;
  padding-left: 4px;
  text-align: center;
}

.pruned-msg-filter-pad {
  padding-top:8px;
}

.filter-breadcrumbs {
  border-bottom: 1px solid #ddd;
  padding-top: 3px;
}

.dropdown-toggle {
  background: none;
  padding: 0 0 4px 0;
}&lt;/css&gt;&lt;data_table&gt;sp_instance_table&lt;/data_table&gt;&lt;demo_data&gt;{"data":
	{
		"table": "incident",
		"view": "default",
		"o": "opened_at",
		"d": "desc",
		"filter": "activeEQtrue",
		"p": 1,
		"fields": "number,short_description"
	}
}&lt;/demo_data&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list&gt;table,filter,field_list,maximum_entries,order,order_by,order_direction,title,color,glyph,sp_page&lt;/field_list&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;ocio-widget-data-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link&gt;&lt;![CDATA[function(scope, element, attrs, ctrl){
	var $ul, $contextMenu;

	scope.focusOnTableHeader = function() {
		element.find(".data-table-title").attr("tabindex", "-1").focus();
	}

	element.on('contextmenu', function(e){
		if (e.ctrlKey)
			return; // ctrlKey is for the debug menu, not this menu

		var rowScope = angular.element(e.target).scope();
		var field, item, fieldVal;

		// Context Menu for tbody
		if (angular.isDefined(rowScope.field) &amp;&amp; angular.isDefined(rowScope.item)){
			e.preventDefault();
			field = rowScope.field;
			item = rowScope.item;
			fieldVal = item[field].value;

			var items = [
				['${Show Matching}', function(){
					ctrl.createQueryTerm(scope.data.table, field, item.sys_id, '=').then(function(term){
						ctrl.showMatching(field, term);
					});
				}],
				['${Filter Out}', function(){
					ctrl.createQueryTerm(scope.data.table, field, item.sys_id, '!=').then(function(term){
						ctrl.filterOut(field, term);
					});
				}]
			];

			renderContextMenu(items);
			setContextMenuPosition(e);
		}
	});

	function renderContextMenu(items){
		var scrollHeight = $('body').get(0).scrollHeight;
		$contextMenu = angular.element('&lt;div&gt;', {'class': 'dropdown clearfix context-dropdown open'});

		$contextMenu.on('click', function (e) {
			if ($(e.target).hasClass('dropdown')) {
				_clearContextMenus(event);
			}
		});
		$contextMenu.on('contextmenu', function (event) {
			event.preventDefault();
			_clearContextMenus(event);
		});

		$contextMenu.css({
			position: 'absolute',
			top: 0,
			height: scrollHeight,
			left: 0,
			right: 0,
			zIndex: 9999
		});

		$('body').append($contextMenu);

		$ul = angular.element('&lt;ul&gt;', {
			'class': 'dropdown-menu',
			'role': 'menu'
		});
		renderItems();
		$contextMenu.append($ul);

		function renderItems(){
			angular.forEach(items, function (item) {
				var $li = angular.element('&lt;li&gt;');

				if (item === null) {
					$li.addClass('divider');
				} else {
					var $a = angular.element('&lt;a&gt;');
					$a.attr({tabindex: '-1', href:'#'});
					$a.text(item[0]);
					$li.append($a);
					$li.on('click', function (e) {
						e.preventDefault();
						scope.$apply(function () {
							_clearContextMenus(e);
							item[1].call(item, item);
						});
					});
				}

				$ul.append($li);
			});
		}
	}

	function _clearContextMenus(event){
		if (!event){
			return;
		}

		angular.element(event.currentTarget).removeClass('context');

		var els = angular.element(".context-dropdown");
		angular.forEach(els, function(el){
			angular.element(el).remove();
		});
	}

	var contextMenuItemHeight = 0;
	function setContextMenuPosition(event){
		if (contextMenuItemHeight === 0)
			contextMenuItemHeight = $ul.children(0).height();

		// Why not just call .width() and .height() on the container? Because those calculations cause browsers to reflow
		// that can cause IE10 to take 200ms to render a context menu.
		var cmWidth = 150;
		var cmHeight = contextMenuItemHeight * $ul.children().length;
		var startX = event.pageX + cmWidth &gt;= window.innerWidth ? event.pageX - cmWidth : event.pageX;
		var startY = event.pageY + cmHeight &gt;= window.innerHeight ? event.pageY - cmHeight : event.pageY;

		$ul.css({
			display: 'block',
			position: 'absolute',
			left: startX,
			top: startY,
			'min-width': cmWidth
		});
	}
}]]&gt;&lt;/link&gt;&lt;name&gt;OCIO Data Table&lt;/name&gt;&lt;option_schema&gt;[{"hint":"If enabled, show the list filter in the breadcrumbs of the data table","name":"enable_filter","default_value":"false","section":"Behavior","label":"Enable Filter","type":"boolean"}]&lt;/option_schema&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles&gt;snc_external,snc_internal&lt;/roles&gt;&lt;script&gt;&lt;![CDATA[(function() {
	if (!input) // asynch load list
		return;

	data.msg = {};
	data.msg.sortingByAsc = gs.getMessage("Sorting by ascending");
	data.msg.sortingByDesc = gs.getMessage("Sorting by descending");

	data.title = options.title || input.title;

	/*
	 * data.table = the table
	 * data.p = the current page starting at 1
	 * data.o = the order by column
	 * data.d = the order by direction
	 * data.keywords = the keyword search term
	 * data.list = the table data as an array
	 * data.invalid_table = true if table is invalid or if data was not succesfully fetched
	 * data.table_label = the table's display name. e.g. Incident
	 * data.table_plural = the table's plural display name. e.g. Incidents
	 * data.fields = a comma delimited list of field names to show in the data table
	 * data.column_labels = a map of field name -&gt; display name
	 * data.window_size = the number of rows to show
	 * data.filter = the encoded query
	 */
	// copy to data[name] from input[name] || option[name]

	optCopy(['table', 'p', 'o', 'd', 'filter', 'filterACLs', 'fields', 'keywords', 'view']);
	optCopy(['relationship_id', 'apply_to', 'apply_to_sys_id', 'window_size']);
	if (!data.table) {
		data.invalid_table = true;
		data.table_label = "";
		return;
	}

	if (!data.fields) {
		if (data.view)
			data.fields = $sp.getListColumns(data.table, data.view);
		else
			data.fields = $sp.getListColumns(data.table);
	}
//	data.view = data.view || 'mobile';
	data.fields = "number,cat_item,state,u_item_requested_for,u_item_requested_for.user_name,company,request,opened_at,closed_at,u_item_requested_by";
   // data.table = "sc_req_item";
	data.table = data.table ||$sp.getValue('table');
	data.filter = data.filter || $sp.getValue('filter');
	data.keywords = data.keywords || $sp.getValue('keywords');
	data.p = data.p || $sp.getValue('p') || 1;
	data.p = parseInt(data.p);
	data.o = data.o || $sp.getValue('o') || $sp.getValue('order_by');
	data.d = data.d || $sp.getValue('d') || $sp.getValue('order_direction');
	data.page_index = data.p - 1;
	data.show_new = data.show_new || options.show_new;
	var windowSize = data.window_size || $sp.getValue('maximum_entries') || 20;
	windowSize = parseInt(windowSize);
	if (isNaN(windowSize) || windowSize &lt; 1)
		windowSize = 20;
	data.window_size = windowSize;

	var gr;
	if (gs.getProperty("glide.security.ui.filter") == "true" || GlideTableDescriptor.get(data.table).getED().hasAttribute("glide.security.ui.filter")) {
		gr = new FilteredGlideRecord(data.table);
		gr.applyRowSecurity();
	} else
		gr = new GlideRecordSecure(data.table);
	if (!gr.isValid()) {
		data.invalid_table = true;
		data.table_label = data.table;
		return;
	}

  data.canCreate = gr.canCreate();
	data.newButtonUnsupported = data.table == "sys_attachment";
	data.table_label = gr.getLabel();
	data.table_plural = gr.getPlural();
	if (data.filter) {
		if (data.filterACLs)
			gr = $sp.addQueryString(gr, data.filter);
		else
			gr.addEncodedQuery(data.filter);
	}

	if (data.keywords){
		gr.addQuery('123TEXTQUERY321', data.keywords);
		data.keywords = null;
	}

	data.filter = gr.getEncodedQuery();

	if (data.relationship_id) {
		var rel = GlideRelationship.get(data.relationship_id);
		var target = new GlideRecord(data.table);
		var applyTo = new GlideRecord(data.apply_to);
		applyTo.get("sys_id", data.apply_to_sys_id);
		rel.queryWith(applyTo, target); // put the relationship query into target
		gr.addEncodedQuery(target.getEncodedQuery()); // get the query the relationship made for us
	}

	if (data.o){
		if (data.d == "asc")
			gr.orderBy(data.o);
		else
			gr.orderByDesc(data.o);
	}

	data.window_start = data.page_index * data.window_size;
	data.window_end = (data.page_index + 1) * data.window_size;
	gr.chooseWindow(data.window_start, data.window_end);
	gr._query();

	data.row_count = gr.getRowCount();
	data.num_pages = Math.ceil(data.row_count / data.window_size);
	data.column_labels = {};
	data.fields_array = data.fields.split(',');

	// use GlideRecord to get field labels vs. GlideRecordSecure
	var grForLabels = new GlideRecord(data.table);
	for (var i in data.fields_array) {
		var field = data.fields_array[i];
		var ge = grForLabels.getElement(field);
		if (ge == null)
			continue;

		data.column_labels[field] =  ge.getLabel();
		
		var custom_label=ge.getLabel();
		if( custom_label=="User ID"){
			
			data.column_labels[field] =  "Item requested for ID";
			
		}
			if( custom_label=="Organization"){
			
			data.column_labels[field] =  "Organization";
			
		}
	}

	data.list = [];
	while (gr._next()) {
		var record = {};
		$sp.getRecordElements(record, gr, data.fields);
		if (gr instanceof FilteredGlideRecord) {
			// FilteredGlideRecord doesn't do field-level
			// security, so take care of that here
			for (var f in data.fields_array) {
				var fld = data.fields_array[f];
				if (!gr.isValidField(fld))
					continue;

				if (!gr[fld].canRead()) {
					record[fld].value = null;
					record[fld].display_value = null;
				}
			}
		}
		record.sys_id = gr.getValue('sys_id');
		data.list.push(record);
	}

	data.enable_filter = (input.enable_filter == true || input.enable_filter == "true" ||
		options.enable_filter == true || options.enable_filter == "true");
	var breadcrumbWidgetParams = {
		table: data.table,
		query: data.filter,
		enable_filter: data.enable_filter
	};
	data.filterBreadcrumbs = $sp.getWidget('widget-filter-breadcrumbs', breadcrumbWidgetParams);

	// copy to data from input or options
	function optCopy(names) {
		names.forEach(function(name) {
			data[name] = input[name] || options[name];
		})
	}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;mkuriako&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-20 20:38:06&lt;/sys_created_on&gt;&lt;sys_id&gt;13db46ed4f802300c8030fbf9310c713&lt;/sys_id&gt;&lt;sys_mod_count&gt;69&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO Data Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_13db46ed4f802300c8030fbf9310c713&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 05:34:18&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="panel panel-{{options.color}} b"&gt;
    &lt;div class="panel-heading form-inline" ng-hide="options.hide_header"&gt;
      &lt;span class="dropdown m-r-xs"&gt;
        &lt;button aria-label="${Table menu}" class="btn dropdown-toggle glyphicon glyphicon-menu-hamburger" style="line-height: 1.4em" id="optionsMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"&gt;&lt;/button&gt;
        &lt;ul class="dropdown-menu" aria-labelledby="optionsMenu"&gt;
          &lt;li ng-repeat="t in ::exportTypes"&gt;
            &lt;a ng-href="/{{data.table}}_list.do?{{::t.value}}&amp;sysparm_query={{data.filter}}&amp;sysparm_view={{data.view}}&amp;sysparm_fields={{data.fields}}" target="_new"&gt;${Export as} {{::t.label}}&lt;/a&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/span&gt;
      &lt;span class="panel-title"&gt;&lt;i ng-if="options.glyph" class="fa fa-{{options.glyph}} m-r"&gt;&lt;/i&gt;{{data.title || data.table_plural}}&lt;/span&gt;
      &lt;button name="new" role="link" class="btn btn-primary btn-sm m-l-xs" ng-click="newRecord()" ng-if="options.show_new &amp;&amp; data.canCreate &amp;&amp; !data.newButtonUnsupported" aria-label="${Create new record}"&gt;${New}&lt;/button&gt;
      &lt;div class="pull-right" ng-if="options.show_keywords"&gt;
		&lt;form ng-submit="setSearch(true)"&gt;
        &lt;div class="input-group"&gt;
          &lt;input type="text" name="datatable-search" ng-model="data.keywords" ng-model-options="{debounce:250}" class="form-control" placeholder="${Keyword Search}"&gt;
          &lt;span class="input-group-btn"&gt;
            &lt;button name="search" class="btn btn-default" type="submit" aria-label="${Search}"&gt;&lt;span class="glyphicon glyphicon-search"&gt;&lt;/span&gt;&lt;/button&gt;
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;/form&gt;
      &lt;/div&gt;
      &lt;div class="clearfix"&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- body --&gt;
    &lt;div class="panel-body"&gt;
      &lt;h2 class="sr-only data-table-title"&gt;{{title || data.table_plural}} ${table} - ${page} {{data.p}}&lt;/h2&gt;
      &lt;div ng-if="options.show_breadcrumbs &amp;&amp; (data.filter || data.enable_filter)" class="filter-breadcrumbs"&gt;
	    		&lt;sp-widget widget="data.filterBreadcrumbs"&gt;&lt;/sp-widget&gt;
      &lt;/div&gt;
      &lt;div class="alert alert-info" ng-if="!data.list.length &amp;&amp; !data.num_pages &amp;&amp; !data.invalid_table &amp;&amp; !loadingData"&gt;
        ${No records in {{data.table_label}} &lt;span ng-if="data.filter"&gt;using that filter&lt;/span&gt;}
      &lt;/div&gt;
      &lt;div class="alert alert-info" ng-if="loadingData"&gt;
          &lt;fa name="spinner" spin="true"&gt;&lt;/fa&gt; ${Loading data}...
       &lt;/div&gt;
      &lt;table class="table table-striped table-responsive" ng-if="data.list.length"&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th class="sr-only"&gt;&lt;/th&gt;
            &lt;th ng-repeat="field in data.fields_array track by $index" ng-click="setOrderBy(field)" tabindex="0"&gt;
              &lt;div class="th-title" aria-label="${Sort by } {{data.column_labels[field]}}"&gt;{{data.column_labels[field]}}&lt;/div&gt;
              &lt;i class="fa" ng-if="field == data.o" ng-class="{'asc': 'fa-chevron-up', 'desc': 'fa-chevron-down'}[data.d]" aria-label="${Sorted by } {{data.column_labels[field]}} {{data.d == 'asc' ?  '${Ascending}': '${Descending}' }}"&gt;&lt;/i&gt;
            &lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
          &lt;tr ng-repeat="item in data.list track by item.sys_id"&gt;
            &lt;td class="sr-only" tabindex="0" role="link" id="{{item.sys_id}}" ng-click="go(data.table, item)" aria-label="${Open record}"&gt;&lt;/td&gt;
            &lt;td role="text" aria-label="{{item[field].display_value}}" class="pointer" ng-class="{selected: item.selected}" ng-click="go(data.table, item)" ng-repeat="field in ::data.fields_array" data-field="{{::field}}" data-th="{{::data.column_labels[field]}}"&gt;{{::item[field].display_value}}&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
      &lt;div ng-class="{'pruned-msg-filter-pad': (!options.show_breadcrumbs || !data.filter) &amp;&amp; !data.list.length}" class="pruned-msg" ng-if="rowsWerePruned()"&gt;
        &lt;span ng-if="rowsPruned == 1"&gt;${{{rowsPruned}} row removed by security constraints}&lt;/span&gt;
        &lt;span ng-if="rowsPruned &gt; 1"&gt;${{{rowsPruned}} rows removed by security constraints}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- footer --&gt;
    &lt;div class="panel-footer" ng-hide="options.hide_footer" ng-if="data.row_count"&gt;
      &lt;div class="btn-toolbar m-r pull-left"&gt;
        &lt;div class="btn-group"&gt;
          &lt;a ng-disabled="data.p == 1" href="javascript:void(0)" ng-click="setPageNum(data.p - 1)" class="btn btn-default"  aria-label="${Previous page}"&gt;&lt;i class="fa fa-chevron-left"&gt;&lt;/i&gt;&lt;/a&gt;
        &lt;/div&gt;
        &lt;div ng-if="data.num_pages &gt; 1 &amp;&amp; data.num_pages &lt; 20" class="btn-group"&gt;
          &lt;a ng-repeat="i in getNumber(data.num_pages) track by $index" ng-click="setPageNum($index + 1)" href="javascript:void(0)" ng-class="{active: ($index + 1) == data.p}" type="button" class="btn btn-default" aria-label="${Page} {{$index + 1}}"&gt;{{$index + 1}}&lt;/a&gt;
        &lt;/div&gt;
        &lt;div class="btn-group"&gt;
          &lt;a ng-disabled="data.p == data.num_pages" href="javascript:void(0)" ng-click="setPageNum(data.p + 1)" class="btn btn-default" aria-label="${Next page}"&gt;&lt;i class="fa fa-chevron-right"&gt;&lt;/i&gt;&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="m-t-xs panel-title"&gt;${Rows {{data.window_start + 1}} - {{ mathMin(data.window_end,data.row_count) }} of {{data.row_count}}}&lt;/div&gt;

      &lt;span class="clearfix"&gt;&lt;/span&gt;
      
    &lt;/div&gt;
  &lt;/div&gt;
]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-71772814</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>279d7b08db49e780fe199236db961954</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1663d91d2e80000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>OCIO Data Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>328c663b483ca78014af897bc9ab1c73</update_guid>
<update_guid_history>328c663b483ca78014af897bc9ab1c73:-71772814,336a76073ab8a3803655879b7cf330dc:2069627181,a5b736838cb8a380dda3b68f23c94b12:-315717395,6390d283b638a38046a034500d40ca5b:89356568,b45463d0791023004d1671c9e436e74c:571869601,eb4423146f102300364961047c0ea4e9:96236038,e3726b90221023001a8c0c1ba7328337:571869601,7281af109a1023008fea8f924eb37ef5:1411356560,976c8858bd1023002515e0e4bd595b09:275418437,036b88d0a11023008a3163d4ab23bbae:1906209263,0057499622802300a36f7fa0b423a512:275418437,12e3c992ff8023009c5bb76734e02fc8:275418437,ba72c9923c802300438d3d0e5d5d8e7a:1769915010,a92201d20b802300369152bf24003453:1969923130,8ec1c9920c8023009f32cc4f7d5fdc76:2146008483,77610592b7802300d64f20774fa256ea:-1812480304,1201c952908023000b2ab54ae6b2646d:-397709092,80a08d52c080230077374515b1bc9505:2146008483,fc604552d78023002186d5623d9a41ae:-1812480304,b50005527880230095cfcfe3a946434c:2146008483,4cdff8123b802300cf28268a1eb2bf08:627330202,d1feb4126d8023009d8b3e604426ed80:-407773367,80ee381282802300192fa5a5c840676f:227044841,6d853cda644023004218ee819a000fe3:142605110,5522ac124b4023009fc45fc51012edd6:-404527130,d9e1e452ad402300d5c4e4215d69bb91:1795275375,2791a4de8f0023003e5e9334b299e513:142605110,c29e50dec50023006c93f87d15b6fe24:-438082057,7d5d90de2700230081b44de4a3e9e764:-1951236351,cb03081232002300a5947988d5a9db0d:211247508,1e920c521b0023008fd53b198a0afd49:1564668213,2e4fec8a39442300b4f6684b647ee257:-519084820,93870b3597c0230022919a8727b70e53:-250938785,d66743317ac02300c36d36cf92fcaece:-250938785,ed31e2fd4c4023001f750abfdb58737f:-519084820,39fb3eb541402300e94689ddcc13d69e:-739602547,ed31e2fd4c4023001f750abfdb58737f:-519084820,a858def500402300b6258b07d63af121:-739602547,fab39fa96c4423000e31beb87164a97b:-739602547,12735ba905442300c7dee445d8aeb3b0:1530055737,dbf21ba9e044230082d105d38cd2c261:782305902,94e2d7a9a1442300fec104d558624dad:1911483542,38b213a9eb442300380f662aaab2cb35:-2063289054,82a1976933442300dee7f7d0702f864e:-1251892991,0f60df29884423005af53cff2ff392b5:1238505200,61dfc72908442300484e436c7a5a81be:-1047084707,b33f07e5c044230069db1c6fdf1159d1:1333624355,6e9d4fa5eb4423002d497626942789d7:-1480896831,7a6c0f6589442300a46b4ec5e42c4f71:-1805293072,3f1c0b251444230051c85a1cdebf06f0:1188718280,55b3fea5460423006ab57b1f1a0a7318:60298582,7e333629f004230041836d02c6546584:899264127,81a2b229e3042300f75bb7e45da6e811:444830724,31c1b6a544042300247cccfc99ecf64d:-168228892,354ee6659e042300959971345b5f18c1:454672121,73eb6ee1e2042300578d5e572c1d9930:-1525125624,5e6b6ae1a8042300892e1482ce3503e2:-220216754,9e0b2ae110042300ea6f9ae9293efd06:-1536701441,150a22edfec0230097f3b4b2fdceba4f:1725870862,967f1ee9d6c023008dbbb2fdf0e834cc:454672121,ca3fdae901c0230024669d2e50534ec3:1385577922,8ee992e5c7c02300e75f8bf23af4f4d9:-561638967,e09956e522c02300ae293d12e1e0c569:1824561390,b1ed462183c023007d9a07668b3981b2:-561638967,fb2dceedb8802300bc6812f1a33897cf:-1212755401,14ac46211cc0230055add8039e71d69c:1334160284,b3eb02ed0c8023003dfdcb484e49c9c0:-544810232,d3db46ed7580230033f0d441db61ec15:1507417086</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_7c01f2a5db1f13003d1dd001cf961940</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Change Account">d401be25db1f13003d1dd001cf9619a2</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value/><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>false</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_organization</name><order>250</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For Organization</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>core_company</reference><reference_qual/><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:18</sys_created_on><sys_id>7c01f2a5db1f13003d1dd001cf961940</sys_id><sys_mod_count>2</sys_mod_count><sys_name>Requested For Organization</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_7c01f2a5db1f13003d1dd001cf961940</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 01:54:53</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>simple</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=7c01f2a5db1f13003d1dd001cf961940"/><fx_price action="delete_multiple" query="id=7c01f2a5db1f13003d1dd001cf961940"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>7c01f2a5db1f13003d1dd001cf961940</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:18</sys_created_on><sys_id>7401f2a5db1f13003d1dd001cf961942</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-14 16:33:18</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>7c01f2a5db1f13003d1dd001cf961940</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:18</sys_created_on><sys_id>3c01f2a5db1f13003d1dd001cf961941</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-14 16:33:18</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>1332204244</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>2b9d7b08db49e780fe199236db961953</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641ef4c940000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For Organization</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>56e38344ed01678039b24b3ce386e4aa</update_guid>
<update_guid_history>56e38344ed01678039b24b3ce386e4aa:1332204244,add188b9f15f130094e1af5b343e233a:-974273614,7801f2a5231f13002d55864b60241445:1665742811</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>core_company_2d5a7121db611b00d54b9c78db9619c1</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="core_company"><core_company action="INSERT_OR_UPDATE"><apple_icon/><banner_image/><banner_image_light/><banner_text/><city/><contact/><country>USA</country><customer>false</customer><discount/><fax_phone/><fiscal_year/><lat_long_error/><latitude/><longitude/><manufacturer>false</manufacturer><market_cap>0</market_cap><name>Independent Investigations Office of BC (Ministry of Justice)</name><notes/><num_employees/><parent display_value="Justice Sector">a4905b46db38a3009d289236db96194a</parent><phone/><primary>false</primary><profits>0</profits><publicly_traded>false</publicly_traded><rank_tier/><revenue_per_year>0</revenue_per_year><sso_source/><state/><stock_price/><stock_symbol/><street/><sys_class_name>core_company</sys_class_name><sys_created_by>ttanti</sys_created_by><sys_created_on>2018-04-18 12:44:33</sys_created_on><sys_id>2d5a7121db611b00d54b9c78db9619c1</sys_id><sys_mod_count>1</sys_mod_count><sys_updated_by>JAJOSE</sys_updated_by><sys_updated_on>2018-10-04 21:23:02</sys_updated_on><theme/><u_code>IIO</u_code><vendor>false</vendor><vendor_manager/><vendor_type/><website/><zip/></core_company></record_update>]]></payload>
<payload_hash>-586262983</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>2f9d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166425bdd690000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Independent Investigations Office of BC (Ministry of Justice)</target_name>
<type>Company</type>
<update_domain>global</update_domain>
<update_guid>1f0fd3407409e7804653d50c4a0d634e</update_guid>
<update_guid_history>1f0fd3407409e7804653d50c4a0d634e:-586262983</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_include_e952a73e4f671300c8030fbf9310c737</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.OCIO_SR_CatalogHelper&lt;/api_name&gt;&lt;client_callable&gt;true&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;OCIO_SR_CatalogHelper&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * Helper Functions for Service Request Project
 * 
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-43 16-August-2018 Mathew Kuriakose   Initial implementation 
 * Copyright to BC Public Service - Service Request
 */


var OCIO_SR_CatalogHelper = Class.create();
OCIO_SR_CatalogHelper.prototype = Object.extendsObject(AbstractAjaxProcessor,{
	
AssignGroup: function() {

var response ='false';	
var myUserObject = gs.getUser();
	
return(myUserObject.isMemberOf('Access Portal Full Catalog')||gs.hasRole('admin'));

},
	
	
Sector_Finder: function() {
var parent_company ='';
var company_sys='';
var user_has_company="no";
var return_string ='sys_created_onISEMPTY';
var user_id =gs.getUserID();
var company_id = gs.getUser().getCompanyID();
var current_cart ='';
	
//Check if there is a cart 
var check_cart =new GlideRecord('sc_item_option');
check_cart.addEncodedQuery('item_option_new.question_text=Requested For^cart_item.cart.user='+user_id+'^cart_item.cart.name=DEFAULT');
check_cart.query();
if(check_cart.next()){
	
var req_for_user = check_cart.value+'';
var user_rec =new GlideRecord('sys_user');
user_rec.addQuery('sys_id',req_for_user);
user_rec.query();
if(user_rec.next()){
	
user_has_company="yes";
company_sys =user_rec.company;

}
	
if(user_has_company=="yes"&amp;&amp; company_sys!=''){
	
return_string = "company="+company_sys;
	
}	
	
}
	
//No cart evaluate as usual
	
else{
	
if(company_id!=''){
	
var grComp = new GlideRecord('core_company');
	
if (grComp.get(gs.getUser().getCompanyID())) {
	 
user_has_company="yes";
parent_company = grComp.parent;
} 
	
if(user_has_company=="yes"&amp;&amp; parent_company==''){
	
return_string = "company="+company_id;
	
}

if(user_has_company=="yes"&amp;&amp; parent_company!=''){
	
return_string = "company.parent="+parent_company;
	
}
	
}
//	gs.log("return_string "+return_string);

}
return return_string;
},
	
    cart_info: function() {
	var user_id =gs.getUserID();
	var cart_sys = this.getParameter('sysparam_cartID')+'';
	var reqfor_sys =this.getParameter('sysparam_reqFor')+'';
	var OldValue =this.getParameter('sysparam_oldValue')+'';

	var result = this.newItem("result");
    var cart_org='';
	var reqfor_org='';
//First check if there is a cart available 	
		
//check user has any item in Cart
var check_cart =new GlideRecord('sc_item_option');
check_cart.addEncodedQuery('item_option_new.question_text=Requested For^cart_item.cart.user='+user_id+'^cart_item.cart.name=DEFAULT');
check_cart.query();
if(check_cart.next()){

//if there is a cart then all the item reqfor should have same org
var cart_req_forsys= check_cart.value+'';
var cart_company = new GlideRecord('sys_user');
cart_company.addQuery("sys_id", cart_req_forsys);
cart_company.query();
if(cart_company.next()){
	
cart_org=cart_company.company;
	
}

var reqfor_company = new GlideRecord('sys_user');
reqfor_company.addQuery("sys_id", reqfor_sys);
reqfor_company.query();
if(reqfor_company.next()){
	
reqfor_org=reqfor_company.company;
	
}
	
if(reqfor_org!=cart_org){
	
	result.setAttribute("cart_old_reqfor",OldValue);
	result.setAttribute("cart_eva_result","invalid");

}
	
}
//No current cart so no evaluation required		
else{
	
	result.setAttribute("cart_eva_result","valid");

}
},
	

type: 'OCIO_SR_CatalogHelper'


});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-31 03:37:33&lt;/sys_created_on&gt;&lt;sys_id&gt;e952a73e4f671300c8030fbf9310c737&lt;/sys_id&gt;&lt;sys_mod_count&gt;50&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO_SR_CatalogHelper&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_e952a73e4f671300c8030fbf9310c737&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 23:13:20&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>545519402</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>2f9d7b08db49e780fe199236db961955</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166415b64840000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>OCIO_SR_CatalogHelper</target_name>
<type>Script Include</type>
<update_domain>global</update_domain>
<update_guid>b7ee1e48488d2780711128f7885fa48b</update_guid>
<update_guid_history>b7ee1e48488d2780711128f7885fa48b:545519402,c3bc29440f0d278047dc41d752e2c188:545519402,f253e14c03c9278031597f1194756b19:-2121571144,4a5605405b89278084edeba264be1728:2110497976,7bdaeaf7303ca780be81a2c421e64966:365096516,247aeeb76a3ca780ce4591075fa0be2d:734695229,6d86a637d83ca780be39cb51515c1d1b:-433678741,8b20e633993ca780f0d3e41b66052219:1950087139,d5ef96336c3ca780175ff8559bff01b5:-406909197,6dcf9633773ca780f16d909516598810:1627081038,84af167f46f8a78052d0b88fa47dd0fd:-406909197,d05f69fffd78a78093efda346a07289d:330312885,fbeee93383b8a780180ac5158f4a77ec:1063207923,1fae25fff378a78052a0423d96e8ed20:-747079344,0b1cedbfaf78a780c4e2e27af68bc034:-201634256,09cae93f6f78a7805b6d29194625b9ed:491769331,b848e93f0878a780696a719e7ea064e3:-2091627410,d2c7adfbb878a7805cd7409a1b60e9be:638576156,6ba7a53f8d78a7807238a9c12d30f032:-1719827493,47b56dbb8d78a7806f12c7d80414e596:902939885,fcb3e97b5478a780c357f463fa3d4a0f:1355014941,c179ddb3c878a780c185025fa216a8c2:-16972965,8d8715b3a878a780058a12e0b4e0efbb:-1075165838,08e4193fb97027801ec1c814f63df349:-1278906576,bcf635360bbc6380b00f5c927cfe44d3:-765368168,166671f281bc638049eadfd29c5a5b29:-1984316005,5f3a4c12ad782380cb6e1015af41a2c5:1436671662,33f90c121578238077c6ce1b23ce89e3:1379138888,58650c9a9738238049a4874ad031e3de:-1157225281,e915081ea2382380ac9bbb566bf880fb:1668257286,1ad2c41e9a382380abf80bb25177a5a7:-189246938,2000085afa382380ce4c6a501c307d11:582116051,db52fda0410023009b7eda555d4e4f44:281035526,ff21f9a060002300d84f0ab56bab3df8:281035526,4a10f1606300230085217935994a94d6:-1777269525,6a1043d868042300f7f66825b29cfdba:-1513436658,2e2efa5894042300992ee9c63b9c8a6f:-1513436658,4fad3a58b7042300a309b9ef7a5988aa:1274371874,bb7d3a58f1042300bf5ad6f035ef6212:-1676289845,af4d7e18c804230069e556bf1601f847:1444368452,5e8afad4d1042300469df57bd6a8eba8:-256550607,b45ab2d47b04230052b9a3b64c5ac9a6:-1216930113,ee89e29cc3c02300212edcd3a568c6ee:-1490032845,c0a8ea5cb7c023000c4d765d847a33f7:-719868780,6672273ed9671300cdc63aa4d864b676:-1264342554</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_35cc1e3fdbf8a780fe199236db96193f</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Update Contact Information (GAL)"&gt;ff863cb6db0f1300f72fe04a489619b0&lt;/cat_item&gt;&lt;cat_variable&gt;IO:d896f0f6db0f1300f72fe04a48961921&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Validate ReqFor&lt;/name&gt;&lt;order&gt;420&lt;/order&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading) {
   if (isLoading || newValue == '') {
      return;
   }
// var cart_id = g_form.getValue('cart_sys_id');
 var req_for = g_form.getValue('u_requested_for');
	
    var ga = new GlideAjax("OCIO_SR_CatalogHelper");
	ga.addParam("sysparm_name","cart_info");
	ga.addParam("sysparam_reqFor",req_for);
	ga.addParam("sysparam_oldValue",oldValue);
	ga.getXML(ajaxResponse);   
}

function ajaxResponse(serverResponse) {
	
	var result = serverResponse.responseXML.getElementsByTagName("result");
	var cart_eva_result = result[0].getAttribute("cart_eva_result");
	var cart_old_reqfor =result[0].getAttribute("cart_old_reqfor");
	
	if(cart_eva_result=="invalid"){
	
	alert("Invalid selection, requested for should be from the same org as the user in cart");

	g_form.setValue('u_requested_for', cart_old_reqfor);
		
if(cart_old_reqfor==''){
	
g_form.setValue('u_title', '');
g_form.setValue('u_city', '');
g_form.setValue('u_assistant','');
g_form.setValue('u_pager','');
g_form.setValue('u_business_phone','');
g_form.setValue('u_mobile_phoner','');
g_form.setValue('u_mobile_phoner','');
g_form.setValue('u_office','');
g_form.setValue('u_fax_number','');
g_form.setValue('u_pager', '');
g_form.setValue('u_organization', '');
	

}
			
//	g_form.showFieldMsg('u_requested_for', 'Please select user from same org as in cart','error',true);

	}
	
}
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 04:25:45&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;35cc1e3fdbf8a780fe199236db96193f&lt;/sys_id&gt;&lt;sys_mod_count&gt;19&lt;/sys_mod_count&gt;&lt;sys_name&gt;Validate ReqFor&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_35cc1e3fdbf8a780fe199236db96193f&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 02:29:15&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1625444471</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>639d7b08db49e780fe199236db961951</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166420ec3b20000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Validate ReqFor</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>bdcb034447c5e7805f132b11fe56d8e1</update_guid>
<update_guid_history>bdcb034447c5e7805f132b11fe56d8e1:-1625444471,abf3b248ddcd278097d86313df55f2f5:-1527833034,42037248afcd27806f909be25cdcf70c:1767820822,f8723ac4dacd2780c41c8b445d1d8425:1461660081,f2617ec47fcd2780bf9e4f7fe152b754:-1370442884,d14176c476cd27807ae11fd41583dd9e:1023519470,c3d0be84bacd2780377f95e1156e3c47:761492809,79007a84eecd278005cbf9b102ff24a4:354716076,875e5248e98d2780f4a7b6598708d3ab:-1529808270,726baeb70e3ca78023cf1a5f93a894cd:-288058289,7d2b6af76a3ca780bb68b788ae5b3a8a:-213176314,f79aa6f76a3ca780381e164f32576beb:276738370,792a2eb7033ca7808e5babb9be2e24a5:221157688,5047ae37ae3ca780a9ada178dd149038:542960780,2917aeb3063ca780cdaac09d5707b848:-1428938449,6b90a633bd3ca7808283c7c04c1674f8:23755602,9b6fd2ffbdf8a78092b7beed28d7c03c:-1939499205,7e2e9ebf92f8a780547752e0830306c2:785965902,12dc96bf9cf8a7805f262f13afab0897:1552773807</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_instance_cc316d33d7230200a9addd173e24d4f5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_instance"&gt;&lt;sp_instance action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;class_name/&gt;&lt;color&gt;default&lt;/color&gt;&lt;css/&gt;&lt;glyph/&gt;&lt;id/&gt;&lt;order&gt;3&lt;/order&gt;&lt;roles/&gt;&lt;short_description/&gt;&lt;size&gt;md&lt;/size&gt;&lt;sp_column display_value="2"&gt;1f116d33d7230200a9addd173e24d4c6&lt;/sp_column&gt;&lt;sp_widget display_value="Request Fields"&gt;96cf39f3d7230200a9addd173e24d412&lt;/sp_widget&gt;&lt;sys_class_name&gt;sp_instance&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2015-11-12 15:50:53&lt;/sys_created_on&gt;&lt;sys_id&gt;cc316d33d7230200a9addd173e24d4f5&lt;/sys_id&gt;&lt;sys_mod_count&gt;10&lt;/sys_mod_count&gt;&lt;sys_name&gt;Request Fields&lt;/sys_name&gt;&lt;sys_package display_value="Service Portal - Service Catalog" source="com.glide.service-portal.service-catalog"&gt;811ce833dbb10300ae0690f9db961989&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_instance_cc316d33d7230200a9addd173e24d4f5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;NKUMAR&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-02 21:23:55&lt;/sys_updated_on&gt;&lt;title&gt;Request Fields&lt;/title&gt;&lt;url/&gt;&lt;widget_parameters&gt;&lt;![CDATA[{
	"pickup_msg": {
		"value": "",
		"displayValue": ""
	}
}]]&gt;&lt;/widget_parameters&gt;&lt;/sp_instance&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=cc316d33d7230200a9addd173e24d4f5"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>462108766</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>639d7b08db49e780fe199236db961954</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16636aa7f9a0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Request Fields</target_name>
<type>Instance</type>
<update_domain>global</update_domain>
<update_guid>6db2ff9b0ff86780ba7f2b19d9c10f20</update_guid>
<update_guid_history>6db2ff9b0ff86780ba7f2b19d9c10f20:462108766,2d15bcfa5ff86380608b626ecf368f01:1525165174,611ef315c93c2380590183ad4dd50c6c:462108766,0efb24b706271300ca478686b3114eb6:-1781412399,8afb24b7262713000c6ed3b3ce1bc1b5:-267774334</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_77ed3d7bdb961300f72fe04a489619f0</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Reset Voice Mail Password">fa2cbd7bdb961300f72fe04a4896197a</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value>Ministry of Citizen Services</default_value><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>false</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_organization</name><order>400</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For Organization</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>core_company</reference><reference_qual/><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:34:49</sys_created_on><sys_id>77ed3d7bdb961300f72fe04a489619f0</sys_id><sys_mod_count>2</sys_mod_count><sys_name>Requested For Organization</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_77ed3d7bdb961300f72fe04a489619f0</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 04:48:32</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>simple</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=77ed3d7bdb961300f72fe04a489619f0"/><fx_price action="delete_multiple" query="id=77ed3d7bdb961300f72fe04a489619f0"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>77ed3d7bdb961300f72fe04a489619f0</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:34:49</sys_created_on><sys_id>443e31fbdb961300f72fe04a48961913</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-06-01 19:34:49</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>77ed3d7bdb961300f72fe04a489619f0</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:34:49</sys_created_on><sys_id>0c3e31fbdb961300f72fe04a48961912</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-06-01 19:34:49</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>195877292</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>679d7b08db49e780fe199236db961953</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166428e49080000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For Organization</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>12ab638c5b4167807a02a7cea8084b2c</update_guid>
<update_guid_history>12ab638c5b4167807a02a7cea8084b2c:195877292,82eeb7299a5f1300b4ab1488ba2734fb:-1141505126,483e31fb089613000ecb72a0b140c216:-1260611127</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_d6a02ec8db8d278050479eb6db961959</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Change Account"&gt;d401be25db1f13003d1dd001cf9619a2&lt;/cat_item&gt;&lt;cat_variable&gt;IO:7401f2a5db1f13003d1dd001cf961946&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Validate ReqFor&lt;/name&gt;&lt;order&gt;210&lt;/order&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading) {
   if (isLoading || newValue == '') {
      return;
   }
// var cart_id = g_form.getValue('cart_sys_id');
 var req_for = g_form.getValue('u_requested_for');
	
    var ga = new GlideAjax("OCIO_SR_CatalogHelper");
	ga.addParam("sysparm_name","cart_info");
	ga.addParam("sysparam_reqFor",req_for);
	ga.addParam("sysparam_oldValue",oldValue);
	ga.getXML(ajaxResponse);   
}

function ajaxResponse(serverResponse) {
	
	var result = serverResponse.responseXML.getElementsByTagName("result");
	var cart_eva_result = result[0].getAttribute("cart_eva_result");
	var cart_old_reqfor =result[0].getAttribute("cart_old_reqfor");
	
	if(cart_eva_result=="invalid"){
	
	alert("Invalid selection, requested for should be from the same org as the user in cart");

	g_form.setValue('u_requested_for', cart_old_reqfor);
//	g_form.showFieldMsg('u_requested_for', 'Please select user from same org as in cart','error',true);
		
	if(cart_old_reqfor==''){
	

g_form.setValue('u_organization', '');
	

}

	}
	
}
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 23:20:52&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;d6a02ec8db8d278050479eb6db961959&lt;/sys_id&gt;&lt;sys_mod_count&gt;4&lt;/sys_mod_count&gt;&lt;sys_name&gt;Validate ReqFor&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_d6a02ec8db8d278050479eb6db961959&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 02:29:34&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>257648750</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>6b9d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166420f0e850000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Validate ReqFor</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>a6db0f40c7c5e780717c3b3621723987</update_guid>
<update_guid_history>a6db0f40c7c5e780717c3b3621723987:257648750,5275fe88d5cd27804a39e9571669d209:-410713239,efd47a8870cd2780453bbda49e907e9f:-1347275806,6494728819cd2780e4a076c672f2587e:1957137872,52a02ec8a98d278059095da2058c355c:-1681589619</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_include_c0cec8dedb4713003d1dd001cf96197b</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.OCIO_SR_HelperUtils&lt;/api_name&gt;&lt;client_callable&gt;true&lt;/client_callable&gt;&lt;description&gt;OCIO SR Helper Utilities&amp;#13;
Copyright to BC Public Service, OCIO, Service Request Project&lt;/description&gt;&lt;name&gt;OCIO_SR_HelperUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * Helper Functions for Service Request Project
 *
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-256 10-July-2018  Munhwan Gim      Initial implementation
 * SB-287 01-Aug-2018   Munhwan Gim      Get city from the user location field
 * SB-188 16-Aug-2018   Munhwan Gim      Implement a new function: ajaxFtn_formatPhoneByPattern)
 * SB-687 07-Aug-2018   Mathew kuriakose Validate Street before passing to cleint
 * SB-740 12-Sep-2018   Munhwan Gim      Use Local Date on the getDateComparison()
 *
 * Copyright to BC Public Service - Service Request
 */
var OCIO_SR_HelperUtils = Class.create();
OCIO_SR_HelperUtils.prototype = Object.extendsObject(AbstractAjaxProcessor, {
	USER_TABLE_NAME: 'sys_user',
	SC_CATE_ITEM_TABLE_NAME: 'sc_cat_item',
	
	initialize : function(request, responseXML, gc) {
		AbstractAjaxProcessor.prototype.initialize.call(this, request, responseXML, gc);
	},
	
	/**
 	* Compare the input Date with the current Date in Local
 	* param @sysparm_date_to_check: input local date to compare with the now.
 	* return false for future, true for past
 	**/
	getDateComparison: function(){
		var dateToCheck = this.getParameter("sysparm_date_to_check");
		var gdt = new GlideDateTime();
		var diff = gs.dateDiff(dateToCheck, gdt.getLocalDate(), true);
		
		
		if (diff &lt;= 0)
			return false;
		else
			return true;
	},
	
	/**
 	* Return the formatted phone number to fit on Regular Expression Pattern
 	**/
	formatPhoneNumber: function(phoneOrg, regExPattern, includeExtension){
		
		var includeExtensionStr = includeExtension + '';
		
		// Remove all non-digits, and format it
		var phoneStripped = this._removeNonDigits(phoneOrg);
		var lengthPhone = phoneStripped.length;
		
		// allow 10 to 14 digits to reformat to (###) ###-#### or (###) ###-#### ext # to ####
		//var regExPhonePattern = /^[0-9]{10,14}$/;
			var regExPhonePattern = new RegExp(regExPattern, 'jg');
			var isValidPhoneLength = regExPhonePattern.test(phoneStripped);
			
			var phoneFormatted = '';
			var invalidMsg = '';
			
			if (isValidPhoneLength)
				{
				var area = phoneStripped.substring(0, 3);
				var prefix = phoneStripped.substring(3, 6);
				var line = phoneStripped.substring(6, 10);
				var extNumber = phoneStripped.substring(10, lengthPhone);
				
				if (lengthPhone == 10){
					phoneFormatted = '(' + area + ') ' + prefix + '-' + line;
				} else {
					if (includeExtensionStr == 'true') {
						phoneFormatted = '(' + area + ') ' + prefix + '-' + line + ' ext ' + extNumber;
					} else {
						//invalidMsg = phoneOrg + ' is not valid.';
						invalidMsg = phoneOrg;
					}
				}
			}
			else
				{
				invalidMsg = phoneOrg;
			}
			
			var phoneObj = {
				"phoneFormatted": phoneFormatted,
				"phoneOriginal": phoneOrg,
				"invalidMsg": invalidMsg
			};
			
			return phoneObj;
		},
		
		/**
 		* Return the formatted phone number after stripping off all non-digits from the input, and applied the Reg Exp Pattern
 		**/
		ajaxFtn_formatPhoneByPattern: function() {
			var phoneOrg = this.getParameter('sysparm_phone');
			var includeExtension = this.getParameter('sysparm_include_phone_extension');
			var regExPattern = this.getParameter('sysparm_phone_number_regular_expression_pattern');
			
			// Conver to string to use string manupulation
			var phoneOrgString = phoneOrg+'';
			var phoneObj = this.formatPhoneNumber(phoneOrgString, regExPattern, includeExtension);
			
			return JSON.stringify(phoneObj);
		},
		
		/**
 		* Return User by ID for Service Catalog Item - Update Contact Information
 		* param-1: user sys id
 		* param-2: sc item id
 		* return User object information
 		**/
		ajaxFtn_getUserItemById: function() {
			
			var srcSysId = this.getParameter('sysparm_src_sysid');
			var itemId = this.getParameter('sysparm_item_sysid');
			
			var companyId = '';
			var companyName = '';
			var sc_cat_item_name = '';
			//change to fix street
			var user_street ='';
			var location_street='';
			
			var grItem = new GlideRecord(this.SC_CATE_ITEM_TABLE_NAME);
			grItem.addQuery('sys_id', itemId);
			grItem.setLimit(1);
			grItem.query();
			if (grItem.next()) {
				sc_cat_item_name = grItem.getValue('name');
			}
			else {
				gs.error('ajaxFtn_getUserItemById() - Invalid sc_cat_item sysid provided = ' + itemId);
			}
			
			var grUser = new GlideRecord(this.USER_TABLE_NAME);
			grUser.addQuery('sys_id', srcSysId);
			grUser.setLimit(1);
			grUser.query();
			
			if (grUser.next()) {
				companyId = grUser.getValue('company');
				
				user_street =grUser.getValue('street');
			}
			else {
				gs.error('Invalid source user sysid provided = ' + srcSysId);
			}
			
			if (companyId != '') {
				companyName = this._getCompanyNameById(companyId);
			}
			
			if (user_street != '') {
				location_street = this._getLocBystreet(user_street)+'';
				
			}
			
			
			var cityLocation =  grUser.location.city+'';
			var bizPhoneObj = this._getPhoneValidationOnUser(grUser, 'phone', '^[0-9]{10,14}$', 'true');
				var mobilePhoneObj = this._getPhoneValidationOnUser(grUser, 'mobile_phone', '^[0-9]{10}$', 'false');
					var faxObj = this._getPhoneValidationOnUser(grUser, 'u_fax_number', '^[0-9]{10}$', 'false');
						var pagerObj = this._getPhoneValidationOnUser(grUser, 'u_pager_number', '^[0-9]{10}$', 'false');
							
							var obj = {
								"sc_cat_item_name": sc_cat_item_name,
								"username": this._getFieldValue(grUser, 'user_name'),
								"company": grUser.company+'',
								"title": this._getFieldValue(grUser, 'title'),
								"city": cityLocation,
								"street": location_street,
								//"street": this._getFieldValue(grUser, 'street'),
								"zip": this._getFieldValue(grUser, 'zip'),
								"phone": bizPhoneObj.phoneFormatted,
								"bizPhoneInvalid": bizPhoneObj.phoneInvalid,
								"mobile_phone": mobilePhoneObj.phoneFormatted,
								"mobilePhoneInvalid": mobilePhoneObj.phoneInvalid,
								"u_ad_department": this._getFieldValue(grUser, 'u_ad_department'),
								"u_delivery_office": this._getFieldValue(grUser, 'u_delivery_office'),
								"u_assistant": this._getFieldValue(grUser, 'u_assistant'),
								"u_fax_number": faxObj.phoneFormatted,
								"faxNumberInvalid": faxObj.phoneInvalid,
								"u_pager": pagerObj.phoneFormatted,
								"pagerInvalid": pagerObj.phoneInvalid,
							};
							
							return JSON.stringify(obj);
						},
						
						/**
 						* Return User by ID for Service Catalog Item - Update Contact Information
 						* param: user sys id
 						* return User object information
 						**/
						ajaxFtn_getUserById: function() {
							var srcSysId = this.getParameter('sysparm_src_sysid');
							var companyId = '';
							var companyName = '';
							//change to fix street
							var user_street ='';
							var location_street='';
							
							var grUser = new GlideRecord(this.USER_TABLE_NAME);
							grUser.addQuery('sys_id', srcSysId);
							grUser.setLimit(1);
							grUser.query();
							
							if (grUser.next()) {
								companyId = grUser.getValue('company');
								user_street =grUser.getValue('street');
							}
							else {
								gs.error('Invalid source user sysid provided = ' + srcSysId);
							}
							
							if (companyId != '') {
								companyName = this._getCompanyNameById(companyId);
							}
							
							if (user_street != '') {
								location_street = this._getLocBystreet(user_street)+'';
							}
							
							//Get Now
							var gdt = new GlideDateTime();
							var gdtDateUserTimeZone =  gdt.getLocalDate();
							var timeZone = gdt.getTZOffset()/3600000;
							var todayDateNoTZ = gdtDateUserTimeZone.getYearNoTZ() + '-' + gdtDateUserTimeZone.getMonthNoTZ() + '-' +  gdtDateUserTimeZone.getDayOfMonthNoTZ();
							
							gs.warn('&gt;&gt;&gt;!! JH ajaxFtn_getUserById: gdtDateUserTimeZone:  (' + gdtDateUserTimeZone + ')');
							gs.warn('&gt;&gt;&gt;!! JH ajaxFtn_getUserById: todayDateNoTZ:  (' + todayDateNoTZ + ')');
							
							var uObj = {
								"username": this._getFieldValue(grUser, 'user_name'),
								"company": grUser.company+'',
								"title": this._getFieldValue(grUser, 'title'),
								"city": this._getFieldValue(grUser, 'city'),
								"street": location_street,
								"zip": this._getFieldValue(grUser, 'zip'),
								"phone": this._getFieldValue(grUser, 'phone'),
								"mobile_phone": this._getFieldValue(grUser, 'mobile_phone'),
								"u_ad_department": this._getFieldValue(grUser, 'u_ad_department'),
								"u_delivery_office": this._getFieldValue(grUser, 'u_delivery_office'),
								"u_assitant": this._getFieldValue(grUser, 'u_assitant'),
								"u_fax_number": this._getFieldValue(grUser, 'u_fax_number'),
								"u_pager": this._getFieldValue(grUser, 'u_pager_number'),
								"todayDate": gdtDateUserTimeZone.getByFormat('MMM dd yyyy'),
								"timeZone": timeZone
							};
							
							return JSON.stringify(uObj);
						},
						
						_getPhoneValidationOnUser: function(grUser, fieldName, regEx, includeExtension) {
							var phoneOrg = this._getFieldValue(grUser, fieldName);
							var phoneObj = this.formatPhoneNumber(phoneOrg, regEx, includeExtension);
							var phoneStr = phoneObj.phoneFormatted;
							if (phoneObj.invalidMsg != '') {
								phoneStr = '';
							}
							return {
								"phoneFormatted": phoneStr,
								"phoneOrigin": phoneOrg,
								"phoneInvalid": phoneObj.invalidMsg
							};
						},
						
						_removeNonDigits: function( inputStr ) {
							var regExNumberOnly = new RegExp('[^0-9]', 'jg');
							return inputStr.replace(regExNumberOnly, '');
						},
						
						_getFieldValue: function( gr, valObj ) {
							retVal = '';
							if (gr.getValue(valObj)) {
								retVal =  gr.getValue(valObj);
							}
							return retVal;
						},
						
						_getCompanyNameById: function(id) {
							var grCompany = new GlideRecord('core_company');
							grCompany.get(id);
							return grCompany.sys_id+'';
						},
						
						_getLocBystreet: function(loc) {
							var grAdd= new GlideRecord('x_215090_ocio_madr_ocio_master_address_list_custom_table');
							grAdd.addQuery('u_street', loc);
							grAdd.setLimit(1);
							grAdd.query();
							if (grAdd.next()) {
								
								return grAdd.u_street;
							}
							else
								return '';
							
						},
						
						
						type: 'OCIO_SR_HelperUtils'
					});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-04 02:26:48&lt;/sys_created_on&gt;&lt;sys_id&gt;c0cec8dedb4713003d1dd001cf96197b&lt;/sys_id&gt;&lt;sys_mod_count&gt;145&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO_SR_HelperUtils&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_c0cec8dedb4713003d1dd001cf96197b&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 01:58:06&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>-188204180</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>6b9d7b08db49e780fe199236db961955</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641f23e660000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>OCIO_SR_HelperUtils</target_name>
<type>Script Include</type>
<update_domain>global</update_domain>
<update_guid>61a44744d0016780a4d3dfdf46c6fe36</update_guid>
<update_guid_history>61a44744d0016780a4d3dfdf46c6fe36:-188204180,93a28f807b016780f465448d6b0278d2:-1670096200,c6324780f30167807e0fa798e8a755a1:629009180,4e70cb8027016780490ba7d6f978b626:-254740134,aa5ff2403d016780ea09ef23bbac4cd3:-1819259096,073f72002e0167801f0c10812c642ae5:2053766467,4271c01149b0238032a8823261001e41:-1175957376,e502380b58e0eb40b5b0e696a7c79e46:-232597792,da0456914d2467400bd143bed1cb251c:20108319,5c931251f92467404889725586d7edcf:1271767729,163352919d246740d8bc45c1206bc17c:1659840619,65329651dc24674020ded59cf90f1fbf:-1581729279,00021a113f246740b02fa04c8c0afe8a:686588700,ddafc2dd7ee06740e65607ea44be14ba:190009024,790d4e1d03e0674042f6ea04af0ef308:-183277185,6cecca5dd6e06740495cb720e6b6799f:-1032332563,31cc8a5dd7e06740df05ee2e70366f5b:1205198573,bd8c425d98e067404e4021a042e2de72:664112076,db9b4e1d24e067408fcf75249f67eb00:-1408336028,53ddb8cdc260e74077f09ca091586b49:-2094063152,e59dbc8d0360e740c4cbe2bc08ae6343:292718165,478cb04d9160e74035dedd947475b864:-1104090560,146bb04d0760e740bd293f3462219caf:884775872,a0a8bc0d4860e7409f570a47e43c81b4:1408071840,c908380dde60e740a51dbe0ef60d8c63:619833338,3fc2f4496560e740151cab049a1dba54:-1156254341,18e39c8d4d642740762dd1d775d1bafb:-717137221,ca96b4387668a740595d65c55213fdb2:-1208591485,6da067a461e8e340ae95c8190977e0cc:-1750638264,560fdf247ce8e340cff3a099999f36d6:-835579387,4db5dbac59a8e34083de91043e73d60a:-144077733,99d4df6cc1a8e34028eaa08a50d973d7:-1679918427,a573572c65a8e34038a766432be08fd3:1524442549,1e035b6cfaa8e3402ab1f17499fca386:785091031,18ae83e8d3a8e340302d34f8d9caf5ef:-627755056,444ecfa8eea8e34060186458cd70cc27:315848831,63dd0ba8aea8e340a2d7c1e1e9df8681:-206652361,8cbd87a833a8e340530002fd19bbc1b7:-83871085,fe7d87a86ea8e340f5e43521c1493904:1814211821,6d6077878ad82340a6dab94a72bc9c30:-572695493,88003b47afd82340b07c08aa7b75f625:-140273211,ffafe747cbd82340f6ce17f47d753757:776017285,fb3fef0775d823401b39521f3b3eb56a:-140273211,b6ed670729d82340eb0476132c3b6852:-572695493,1aec6b8394d82340088043fb00a9deb3:-962305979,5be2fe60d9c023007269c29d37abfed2:-572695493,142ea2ec9f802300cb756bb17a7b031c:-1278237621,764d6aac2b802300c713f2c81eb9e37c:-480841137,41abe66c03802300fd759796ec238c67:1785569130,28eaee2cae802300bd6a0001ead9807c:1758754154,36e9262c8f802300a6f8fd0c27771b8f:1713145386,6058aee4f58023000379e9971511783b:-738359481,1ab2aee4b58023007feb178750f47e36:1952019352,3bc062e4d48023006ef1f70e2dd7acf1:-462977672,c620eea46e8023002672140c03af4bd4:1295286008,f60f9224198023001180d1edd723b7b9:-751243916,11dcda24358023002ec9b37e08597b39:148126506,dc0b922437802300b665a49fd3c179b0:-414797257,6db912e08b802300d9df4face4d31016:1679110679,55f5d6202380230039b9cba12925dc97:-464324186,1be3deec2240230073e67874715031e8:267333536,db621e6c5b4023003dab1c121ce07766:944749330,7f0e426c64402300a0a5b7ec6e40e188:1484427016,31f60228724023006b98feb3d188e7da:1504055524,34d646a44c402300b7f5c82333342a8d:618510710,d7b442648d402300f09b1b0842fbc0f0:-1546463603,5ca3ce249c4023008fd6ee35cb2fc44a:942253253,c87202240e402300b0e1c868c9a72a65:1506856519,85d14a24ad40230086932d3550b26b2a:1167874925,cb21cae048402300a25da10e8366a7f9:797138905,6de0c6e0224023006f1afa641c6a8a5c:-1407434306,42ef75e05340230069bbf4960b0da494:-1159611784,55ce7160fb402300194136be58329ef1:-1581772047,3a8e39a066402300ccea6be6ddd46947:1885719189,ba6d3920f6402300076ea1d536816017:-913415019,2c7a7decbd00230078d366a3c2888cf9:1580730042,31c74e14acc02300bb7d38793425fdcd:599964071,d4970a1455c0230094c79374e0fcfe6f:1328997807,a78ee910864023008e28b10b4f732bbb:599964071,d435cddc10002300eb1f166ec82cd353:711030516,1a82cd5cd8002300783ae281758769f8:-554292925,5222cd5c6b002300e2e6924b22ac0691:-509766186,91fefcd8ac0023004b65145d400df9dd:-554292925,700df498a8002300e799d8edc65b2616:-89504013,21aa705803002300452a97d2e157a3e7:906918710,ecb87054f6002300412be5d1ae0f35c3:-766324179,3556b45482002300575c45f88f44b512:-928786729,d2efbc08c6c02300f9e74b77f9885280:-923720914,371eb0c401c02300d7965efdd1ec9cb3:-1704572083,9feaf40450c023009f3d4878ca483338:914648938,77aafc04b7c02300edc594dc98d0d03a:-226249955,670ab80473c02300c756d67e02d3a912:-1446789925,d16974041fc02300225dc6161a6ca654:1732726996,580934044fc02300587c57a90835b76c:-1118500537,9668bcc0e0c023007c53b914ab3548f0:-708717250,0766308029c023005ccbfcb11b1deffc:1292928040,8406b84052c0230092a724381a472f55:752466453,612478409ac02300bcba8d3b9d98ef71:696808349,93f33840fbc023000681738ea1f41575:519024514,0542340075c0230005b5479f5e338d62:714793257,3e91f000a4c02300e98377af44720687:-280722182,fc81300088c02300e8068e0d80079e98:720742597,7a11784cb280230042652139eba556c6:-1831506097,a54038cc9d80230099308e3657e79e65:1462630539,f9fea48c8f802300369fc583f4d0a33c:-1393773696,14cda08c0e802300690fa1a0fae0a594:-1640949081,7d5da04cd98023007ec9af38fbb3fb57:1041526314,0efcecc83e80230024c6e77e3806db1a:1173176844,936ca00c9880230019b57cf2c821f997:188960080,229ae048428023005301cda904a31294:-1411167223,1f0a2c08298023002959113c3d57ddf4:1510832120,54d9a808e28023003b3c102eb174fd15:-710903578,f699e008be80230010139b450f0aa2b6:-142920584,8429a4c43f8023001e437d051cfc5a75:171162689,d0d8e4c47d80230000590f78d58f95aa:143745503,db48acc420802300f6e2de64ca44a20e:734924475,8d3760c4eb8023005cb2243f9ada3c20:-578358937,e0d620c470802300c1761a350e2da235:1461123753,63366084a580230008f0712dd1dc1d50:-120493695,80952c44068023008c4f3605b0ec22b6:21901716,817560843c80230095391a09ae134159:1493060708,02156c44ec802300b48e8662c30a6a3c:310417662,de132804b28023000f0882c3f973aa15:-451676528,9be2a4042c80230088cac9271def862e:-1161029622,30a26cc04b80230089157879f59e2786:-1425862541,ab62a4c08b802300d0b28640baafd00a:2042135795,0a422cc09f8023005627d5ac3265fe88:1145614730,b46f14803c802300145ad5f30e5fe8cf:7979501,29ce58000e8023006b891d6bae70170c:1746849911,4b6e540006802300381751a7aff5b5c7:815691619,07b8dcc846402300683cb2d3e60b5c58:1854542973,4b6b8004b040230065a9a0c784c4463f:-849903919,c37980044b40230007f5baa57288a58b:331375828,09b8c4c0334023006e6b89288406b1ff:678838829,af480004b84023000f2c376a166da3bf:-945500215,e1e7c0c02b402300e4492a6370945432:807507786,fa3780c0e4402300cf2741723dc9cfb9:1656197427,b7a600c08640230049a3584281abc596:-639777743,a3950400cb402300ca10d291b44df271:-1267498796,d8034888780023003a1d5a7c29b366cc:-1794168433,70c164a7ef231300f4a7418c7d11fffe:463390213,3856bfbafcd3d300077d06167c42c0b4:-1430609680,03f43b3a0ad3d300bb6cb28c81253d21:1478910624,44aa63763cd3d300ae770b1d10499f9c:-1430609680,e9d9e73681d3d30068ba1906550eadf4:817987940,e92acb9145d313000697bb9f9e6ee360:-1430609680,5bddb2ddfe9313000e6f9a8e16ef5de5:-14418166,cf5fc89eb647130078dfc21c3a7f4d29:833107445</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_7001f2a5db1f13003d1dd001cf961976</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Change Account"&gt;d401be25db1f13003d1dd001cf9619a2&lt;/cat_item&gt;&lt;cat_variable&gt;IO:7401f2a5db1f13003d1dd001cf961946&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Default from Requested For&lt;/name&gt;&lt;order&gt;200&lt;/order&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading) {
	if (isLoading || newValue == '') {
		return;
	}
	//Get value from script include
	var ga = new GlideAjax('OCIO_SR_HelperUtils');
	ga.addParam('sysparm_name', 'ajaxFtn_getUserById');
	ga.addParam('sysparm_src_sysid',  newValue);
	ga.getXMLAnswer(cbFtn);	
	function cbFtn(answer) {		
		if (answer) {
			var retObj = JSON.parse(answer);
			//Set short description of task
			var sc_item_request_display_name = 'Change Account for '+ retObj.username;
			g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);
			//Set Requested for organization
			g_form.setValue('u_organization', retObj.company);
		}
	}
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-14 16:33:19&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;7001f2a5db1f13003d1dd001cf961976&lt;/sys_id&gt;&lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Default from Requested For&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_7001f2a5db1f13003d1dd001cf961976&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 04:54:27&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>1630676406</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>6f9d7b08db49e780fe199236db961951</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1664293b2710000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Default from Requested For</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>380d2b8c9e416780b504c4d31f5e9c82</update_guid>
<update_guid_history>380d2b8c9e416780b504c4d31f5e9c82:1630676406,8a36af44ac09e78032f2728d92866b16:-1393658818,a9f58f8c2f85e780fa06511a6116fc5f:-623269028,cda50b84910167807e52bde1434f1748:72762567,a545c384f90167801ea179732aeda51a:-1906385391,b6158f442c01678040eedc91a92e861b:-368023697,43f34304ff0167804bb58739a815c0c8:1630676406,58032e709934ef40629f6eeffb530a7a:883547343,7c01f2a5511f1300acf766b852620a84:-1559641402</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_4ebdca4cdb4d278050479eb6db961975</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;sc_item_option&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="sc_item_option"&gt;cart_item.cart.name=DEFAULT^item_option_new.name=u_requested_for^EQ&lt;item endquery="false" field="cart_item.cart.name" goto="false" newquery="false" operator="=" or="false" value="DEFAULT"/&gt;&lt;item endquery="false" field="item_option_new.name" goto="false" newquery="false" operator="=" or="false" value="u_requested_for"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;Prevent Invalid ORG Carts&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

//Check if there is already a cart item present
//If Cart item preset find its req for value and make sure that the current reested for has same org 
var user_id =gs.getUserID();
var ext_user_company='';
var current_user_company='';
var existing_cart ='no';
var req_for_user_ex='';
var current_user_name='';

var check_cart =new GlideRecord('sc_cart_item');
check_cart.addEncodedQuery("cart.user="+user_id+"^cart.name=DEFAULT");
check_cart.addQuery('sys_id','!=',current.cart_item+'');	
check_cart.query();
if(check_cart.next()){
	
//Find the value of reqfor company
existing_cart="yes";
var check_cart_opt =new GlideRecord('sc_item_option');
check_cart_opt.addEncodedQuery('item_option_new.question_text=Requested For');
check_cart_opt.addQuery('cart_item',check_cart.sys_id);	
check_cart_opt.query();
if(check_cart_opt.next()){
	
	
req_for_user_ex = check_cart_opt.value+'';
var user_rec_ex =new GlideRecord('sys_user');
user_rec_ex.addQuery('sys_id',req_for_user_ex+'');
user_rec_ex.query();
if(user_rec_ex.next()){
	
ext_user_company =user_rec_ex.company;


}	
	
}

}
if(existing_cart=="yes"){
	
	
var req_for_user_current = current.value+'';
var user_rec_current =new GlideRecord('sys_user');
user_rec_current.addQuery('sys_id',req_for_user_current+'');
user_rec_current.query();
if(user_rec_current.next()){
	
current_user_company= user_rec_current.company;
 current_user_name = user_rec_current.name;
}	
if(ext_user_company!=current_user_company){
	
gs.addErrorMessage("Invalid action, "+ current_user_name+" organization is different from user selected in cart");
	
var gr_cart = new GlideRecord('sc_cart_item');
gr_cart.addQuery('sys_id',current.cart_item+''); //to delete one record
gr_cart.query();
gr_cart.next();
gr_cart.deleteRecord();
	
}
}
	

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 21:58:27&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;4ebdca4cdb4d278050479eb6db961975&lt;/sys_id&gt;&lt;sys_mod_count&gt;15&lt;/sys_mod_count&gt;&lt;sys_name&gt;Prevent Invalid ORG Carts&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_4ebdca4cdb4d278050479eb6db961975&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 23:02:19&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;after&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=4ebdca4cdb4d278050479eb6db961975"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>1296153584</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>6f9d7b08db49e780fe199236db961954</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641514d260000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table>sc_item_option</table>
<target_name>Prevent Invalid ORG Carts</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>e66c16c4098d27809d5137c13b147b04</update_guid>
<update_guid_history>e66c16c4098d27809d5137c13b147b04:1296153584,14fb9ac4aa8d278039129230d2bcb921:846933604,50cb52c4fb8d2780588a2ccd36bec307:-1283580086,aa6b52c4f48d27809d0cfe2a6bdc0400:636172375,b6599a44f58d27800c03cb0ee5db3eb2:-607643996,73689a043d8d278061444cae5ed851d5:1617116214,b9e79a04538d27802266b2861c607478:-267435946,02259e80318d27801ee1db9cd8b45652:-991892607,c7e49a80bd8d2780ea94947a682245c3:1892439347,d1a41a80c98d2780d38a67c6fba941b5:-1097381652,b7e31e004d8d2780ada1923853434826:714096840,d27ec64ccb4d2780c121313da2800229:1639270525,480e0e4c584d27802f0e5d21582b2e7f:1490629564,82fd4e4cc14d2780f6b4d0fe71b1fc48:1933751244,3fdd424c1e4d2780e402e473adc20f7a:741325261,3ecd8a4c634d278035a155195381b664:-718884207</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_7401f2a5db1f13003d1dd001cf961946</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Change Account">d401be25db1f13003d1dd001cf9619a2</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value/><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>true</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_requested_for</name><order>100</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>sys_user</reference><reference_qual>javascript: new OCIO_SR_CatalogHelper().Sector_Finder();</reference_qual><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:19</sys_created_on><sys_id>7401f2a5db1f13003d1dd001cf961946</sys_id><sys_mod_count>7</sys_mod_count><sys_name>Requested For</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_7401f2a5db1f13003d1dd001cf961946</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 00:23:34</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>advanced</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=7401f2a5db1f13003d1dd001cf961946"/><fx_price action="delete_multiple" query="id=7401f2a5db1f13003d1dd001cf961946"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>7401f2a5db1f13003d1dd001cf961946</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:19</sys_created_on><sys_id>fc01f2a5db1f13003d1dd001cf961947</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-14 16:33:19</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>7401f2a5db1f13003d1dd001cf961946</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-14 16:33:19</sys_created_on><sys_id>b401f2a5db1f13003d1dd001cf961947</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-14 16:33:19</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>1349350540</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>a39d7b08db49e780fe199236db961953</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166419bb2390000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>3c0f664444cd27803b71c34775ace92d</update_guid>
<update_guid_history>3c0f664444cd27803b71c34775ace92d:1349350540,b4c26e4cd48d2780c4f8f23b6677d91c:-1401876909,f6ef16c8fe8d2780ae5adf64a3e5c730:-133281780,20efd2c81f8d27808279c226b73cddbf:836083635,40eb00928b782380ce2f3f0b6b382c50:-133281780,6dd188b9695f1300ebd90b851a679318:-535538200,7401f2a5a21f130080be91249b85ac4b:-1184321331</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_c245788bdb221300f72fe04a489619d5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;false&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Reset Voice Mail Password"&gt;fa2cbd7bdb961300f72fe04a4896197a&lt;/cat_item&gt;&lt;cat_variable/&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Default Values From Current User&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Set Default values using the current logged-In User
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-203 10-Jun-2018  James Jose      Initial implementation
 * SB-662 28-Aug-2018  Munhwan Gim     Use Phone number not User name for sc_item_request_display_name
 *
 **/
function onLoad() {
	
	//Set organization based on the user
	var userID = g_user.userID;
	//Get value from script include at the server side
	var ga = new GlideAjax('OCIO_SR_HelperUtils');
	ga.addParam('sysparm_name', 'ajaxFtn_getUserById');
	ga.addParam('sysparm_src_sysid', userID);
	ga.getXMLAnswer(cbFtn);
	
	function cbFtn(answer) {
		if (answer) {
			var retObj = JSON.parse(answer);
			
			//Set short description of task
			//var sc_item_request_display_name = 'Reset Voice Mail Password for ' + retObj.username;  
			//g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);
			//Set Requested for organization
			g_form.setValue('u_organization', retObj.company);
		}
	}
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-06-11 16:45:36&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;c245788bdb221300f72fe04a489619d5&lt;/sys_id&gt;&lt;sys_mod_count&gt;13&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Default Values From Current User&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_c245788bdb221300f72fe04a489619d5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 04:33:50&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onLoad&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>335900734</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>a79d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1664280d1130000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Default Values From Current User</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>6248eb882f09e780503cf0a6e411a5c4</update_guid>
<update_guid_history>6248eb882f09e780503cf0a6e411a5c4:335900734,50d76f087009e780802a2451656df038:-1785900255,2d9cab0424902300269c692327633780:562019770,7a776b0473902300a97f8ac3eeff9448:-449153671,adfc90d0335023000be154809a66c7e8:-349589214,ebe446a29ac0e70072b71a8cd58cba0d:-259861860,5dc3ca62f0c0e7005590467b4be2f6b8:-1196673287,98d44c3de75f1300e8b5e12c80ecbb7f:-259861860,97e008b5975f13004972fa33ec92be95:-349589214,e3a08879e35f130058ef412b07afc283:1601061449,47ff3fa52e5f13002072f548bdfe2749:524716898,5efaff659f5f130021a1ce658137d300:-1617661012,d8aa7f651d5f13006c049e10ee397664:-330569557,4957bbe1b85f1300e6d34f62306d8de5:982791968,a837736d901f13006618dc2018923bd7:-2138056449,30c67ba1885f130062539f8d49633517:2055520295,4357f8cb68221300d9a10910033b7a35:704141984</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_include_8426c0374f231300c8030fbf9310c7d5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.bcHelperUtil_RITM&lt;/api_name&gt;&lt;client_callable&gt;true&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;bcHelperUtil_RITM&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var bcHelperUtil_RITM = Class.create();
bcHelperUtil_RITM.prototype = Object.extendsObject(AbstractAjaxProcessor, {
	
	canRead: function(current){		
			//var isITIL = gs.getUser().hasRole("itil");
			var isSM = gs.getUser().hasRole("bcgov_sr_service_manager");
			var currentUser = gs.getUserID();
				// IF USER IS A SERVICE MANAGER, CHECK FOR ACCESS BASED ON SECTOR
				if(isSM){
					var companyCode = current.company.u_code;
					return this._canReadRM(companyCode);
				}
				
		},
	canReadReq: function(current){	
			var req_companycode='';
			var isSM = gs.getUser().hasRole("bcgov_sr_service_manager");
			var currentUser = gs.getUserID();
				// IF USER IS A SERVICE MANAGER, CHECK FOR ACCESS BASED ON SECTOR
				if(isSM){
					
					var companyCode = current.company.u_code;
					return this._canReadRM(companyCode);
					
				}
				
		},
	canReadSCTask: function(current){		
			//var isITIL = gs.getUser().hasRole("itil");
			var isSM = gs.getUser().hasRole("bcgov_sr_service_manager");
			var currentUser = gs.getUserID();
				// IF USER IS A SERVICE MANAGER, CHECK FOR ACCESS BASED ON SECTOR
				if(isSM){
					var companyCode = current.request_item.company.u_code;
					
					return this._canReadRM(companyCode);
				}
		},
	_canReadRM: function(companyCode){
			
			var targetRole = "bcgov_"+companyCode;
			if(gs.hasRole(targetRole)){
				return true;
			} else {
				return false;
			}
		},
		
	

    type: 'bcHelperUtil_RITM'
});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 14:08:51&lt;/sys_created_on&gt;&lt;sys_id&gt;8426c0374f231300c8030fbf9310c7d5&lt;/sys_id&gt;&lt;sys_mod_count&gt;15&lt;/sys_mod_count&gt;&lt;sys_name&gt;bcHelperUtil_RITM&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_8426c0374f231300c8030fbf9310c7d5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 01:19:30&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1291923790</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>a79d7b08db49e780fe199236db961955</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641cee6e20000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>bcHelperUtil_RITM</target_name>
<type>Script Include</type>
<update_domain>global</update_domain>
<update_guid>00db7a8c09cd2780b93046f6765e4ae0</update_guid>
<update_guid_history>00db7a8c09cd2780b93046f6765e4ae0:-1291923790,8515e52e2f38e3807be1385c69723d24:1638680100,476429ea4638e3801ca91285c30f8d3d:-2135506945,a6cecd6a5df4e380fcee5a005a4c5808:-173034181,4a2db99308f7130047dcc2c1741d0dc3:-1564751358,c6f8f99f68b71300ae791ac0f795ab4b:-1841795508,c5d48202b1371300e515313bccbbea4b:-2012927261,b25446cef5f3130047069dbee9735fb1:1750321963,82ac4f779b2b1300b3c3b556edca453a:-617227256,b6eacbf3892b130026fcc0d4893662f4:-850898487,9b03a273a1a71300ad424f4332a9a832:-761935287,22f9c8330a23130080b792722712e306:1716486603,5ae90437da2313000472e838dbd621f9:1121042576,25478037c5231300fb1330dd9817e1a5:-1202737588,86264437c52313008015c5c76ac2cb54:571607873</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_5f03ae4cdb8d278050479eb6db96196f</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Change Account"&gt;d401be25db1f13003d1dd001cf9619a2&lt;/cat_item&gt;&lt;cat_variable/&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Requested For&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Set Requested For on Load
 * 
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-155 07-July-2018  Mathew Kuriakose     Initial implementation  

 * Copyright to BC Public Service, OCIO, Service Request Project  
 **/
function onLoad() {
   
	var userID = g_user.userID;
	if(g_form.getValue('u_requested_for') =='' ){
		
		g_form.setValue('u_requested_for',userID);
		
	}
	
	
			}				
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 23:31:18&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;5f03ae4cdb8d278050479eb6db96196f&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Requested For&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_5f03ae4cdb8d278050479eb6db96196f&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 23:31:18&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onLoad&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>89034957</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>ab9d7b08db49e780fe199236db961951</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166416bd9130000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Requested For</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>d303628c968d2780f398835892151082</update_guid>
<update_guid_history>d303628c968d2780f398835892151082:89034957</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_1ee1fb5bdbf86780fe199236db961975</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;sc_request&lt;/collection&gt;&lt;condition/&gt;&lt;description&gt;OCIO-SR-61-To make due date null.&lt;/description&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="sc_request"&gt;state=1^EQ&lt;item endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="1"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OCIO-SR-To make due date null&lt;/name&gt;&lt;order&gt;0&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	// Add your code here

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;NKUMAR&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-02 21:22:04&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path/&gt;&lt;sys_id&gt;1ee1fb5bdbf86780fe199236db961975&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO-SR-To make due date null&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_1ee1fb5bdbf86780fe199236db961975&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;NKUMAR&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-02 21:22:04&lt;/sys_updated_on&gt;&lt;template&gt;due_date=^EQ&lt;/template&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=1ee1fb5bdbf86780fe199236db961975"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-837996408</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>ab9d7b08db49e780fe199236db961954</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16636a8cf0d0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table>sc_request</table>
<target_name>OCIO-SR-To make due date null</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>e242b75b8cf86780b627e0d2ffa21eab</update_guid>
<update_guid_history>e242b75b8cf86780b627e0d2ffa21eab:-837996408</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_2882e24cdb8d278050479eb6db9619d1</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Reset Voice Mail Password"&gt;fa2cbd7bdb961300f72fe04a4896197a&lt;/cat_item&gt;&lt;cat_variable/&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Requested For&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Set Requested For on Load
 * 
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-155 07-July-2018  Mathew Kuriakose     Initial implementation  

 * Copyright to BC Public Service, OCIO, Service Request Project  
 **/
function onLoad() {
   
	var userID = g_user.userID;
	if(g_form.getValue('u_requested_for') =='' ){
		
		g_form.setValue('u_requested_for',userID);
		
	}
	
	
			}				
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-04 23:28:57&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;2882e24cdb8d278050479eb6db9619d1&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Requested For&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_2882e24cdb8d278050479eb6db9619d1&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 23:28:57&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onLoad&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>1240673261</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>af9d7b08db49e780fe199236db961950</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1664169b0890000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Requested For</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>6482e24c3d8d278080658771fc7042d4</update_guid>
<update_guid_history>6482e24c3d8d278080658771fc7042d4:1240673261</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_d896f0f6db0f1300f72fe04a48961921</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Update Contact Information (GAL)">ff863cb6db0f1300f72fe04a489619b0</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value/><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>true</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_requested_for</name><order>200</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>sys_user</reference><reference_qual>javascript: new OCIO_SR_CatalogHelper().Sector_Finder();</reference_qual><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:04</sys_created_on><sys_id>d896f0f6db0f1300f72fe04a48961921</sys_id><sys_mod_count>15</sys_mod_count><sys_name>Requested For</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_d896f0f6db0f1300f72fe04a48961921</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 00:23:16</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>advanced</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=d896f0f6db0f1300f72fe04a48961921"/><fx_price action="delete_multiple" query="id=d896f0f6db0f1300f72fe04a48961921"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>d896f0f6db0f1300f72fe04a48961921</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:04</sys_created_on><sys_id>d096f0f6db0f1300f72fe04a48961923</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-05 18:35:04</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>d896f0f6db0f1300f72fe04a48961921</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:04</sys_created_on><sys_id>9896f0f6db0f1300f72fe04a48961922</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-05 18:35:04</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>520013146</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>af9d7b08db49e780fe199236db961953</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166419b6a720000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>dcfe6e444acd278091ba787d2ea253c8</update_guid>
<update_guid_history>dcfe6e444acd278091ba787d2ea253c8:520013146,eda7e13f4578a780fd7f1ace32a20ea8:22544167,d717edfb5878a780edcdc6472a5f3053:-1646961003,59f6e5fbc478a780699a7b8c8ea59592:222581999,e286e1fb2678a78082758fb4105a353c:-1054491894,cf6629fbc678a780572738a933e9751d:2031552063,57652dbb9278a780709b4ec42599324d:349913135,6620085a1a382380d4baee7397e43521:22544167,42396e745a902300302940757b4bd259:-1199588669,c0396e740a902300ae1be6b4b2891851:-1919347342,a431da7817502300811bd8aab89c9a1e:-1199588669,8c011a78ba5023009f30c28d146d593b:-1389024074,bedc0eb412502300947b1ddcf82311a8:-1199588669,1896f0f6630f13007876c143212bf326:-1861734247,4df8c73a3fafdb006e688bd1a7590eb0:24842428,1896f0f6630f13007876c143212bf326:-1861734247</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_ba77bfe1db5f1300f72fe04a48961954</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Reset Voice Mail Password"&gt;fa2cbd7bdb961300f72fe04a4896197a&lt;/cat_item&gt;&lt;cat_variable&gt;IO:33ec31bbdb961300f72fe04a489619bc&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Set Default from Requested For&lt;/name&gt;&lt;order&gt;200&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Set Default values
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-662 28-Aug-2018  Munhwan Gim     Use Phone number not User name for sc_item_request_display_name
 *
 **/
function onChange(control, oldValue, newValue, isLoading) {
	if (isLoading || newValue == '') {
		return;
	}
	
	//Get value from script include
	var ga = new GlideAjax('OCIO_SR_HelperUtils');
	ga.addParam('sysparm_name', 'ajaxFtn_getUserById');
	ga.addParam('sysparm_src_sysid',  newValue);
	ga.getXMLAnswer(cbFtn);
	function cbFtn(answer) {
		if (answer) {
			var retObj = JSON.parse(answer);

			//Set short description of task
			//var sc_item_request_display_name = 'Reset Voice Mail Password '+ retObj.username;
			//g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);
			//Set Requested for organization
			//alert(retObj.company);
			g_form.setValue('u_organization', retObj.company);
			
			
			var phone = g_form.getValue("u_phone_number"); //newValue; //
			var phone_unfmt = newValue.replace(/[^0-9]/g, ''); 
			if (phone!=''){

				var sc_item_request_display_name = 'Reset Voice Mail Password for '+ phone;
				g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);
				g_form.setValue('sc_task_descriptionTemplate', phone_unfmt, phone_unfmt);
			}			
		}
	}
	
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-14 21:43:38&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;ba77bfe1db5f1300f72fe04a48961954&lt;/sys_id&gt;&lt;sys_mod_count&gt;14&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set Default from Requested For&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_ba77bfe1db5f1300f72fe04a48961954&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 04:47:59&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>1332762395</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>e39d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166428dc5c70000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Set Default from Requested For</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>c28bab4c17416780b90ac7f4f2f5630a</update_guid>
<update_guid_history>c28bab4c17416780b90ac7f4f2f5630a:1332762395,865ba74c3c416780ccce49cb2b01fa8a:1075189254,382b6b4cac416780b6f5d1fb065fbba8:1332762395,d999afc8ae09e7805f5a7989169f3fd1:233265979,45696fc89a09e780c4074ee67cf120dd:-1311029349,e1d8e7c89309e78042c1f4b85b1e17cf:-1774986373,0957e3c4f309e780ac41ce8d679302b3:-1719343555,b23da308179023005a26ae5d4fc56c54:-1519938620,19fce70860902300e5b00ce88c959f55:1975649425,ebace74497902300480da6fde4d28859:-614173379,e7e446a287c0e700b4e6b6b0e65995e5:-168737609,746402a22fc0e700f12e879c146e4a45:1940086804,bea4cc3db25f13008b0d4171e9822f05:-168737609,15d0c4796a5f1300136f5258dae6144f:-614173379,201bbb65135f1300ff26d3d5deba210f:1767917666,bfbaff65285f1300b2982c6fc02e60ac:-614173379,ea08bbe1c55f1300e72a1aed2db19ca3:2061092846</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_c2ee5e854f331300c8030fbf9310c7da</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;false&lt;/action_insert&gt;&lt;action_query&gt;true&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;sc_req_item&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition/&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OCIO SR Ser Manager RITM Query&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {
	
	/*

Service Managers can read recrods where u_requested_by or u_requested_for is their name
Service Managers can read records where u_requested_for company code matches with their role

	*/
	
if(!gs.hasRole('admin')&amp;&amp;gs.getUser().hasRole("bcgov_sr_service_manager") &amp;&amp; gs.getSession().isInteractive()){
	
var qstring ='';
var roles =gs.getSession().getRoles();
var role_array= roles.split(",");
var filtered_array ='';
var new_string ='';
var new_string_final='';

filtered_array=(role_array.filter(function(str){
return str.indexOf("bcgov")&gt;-1;
}));
	
new_string = filtered_array.join();
new_string_final =new_string.replace(/bcgov_/g , "");
qstring='request.requested_forDYNAMIC'+gs.getUserID()+'^ORu_item_requested_byDYNAMIC'+gs.getUserID()+'^ORu_item_requested_forDYNAMIC'+gs.getUserID()+'^ORcompany.u_codeIN'+new_string_final;
	
current.addEncodedQuery(qstring);
		
}
		
	

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-06 22:29:36&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;c2ee5e854f331300c8030fbf9310c7da&lt;/sys_id&gt;&lt;sys_mod_count&gt;47&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO SR Ser Manager RITM Query&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_c2ee5e854f331300c8030fbf9310c7da&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-09-30 01:34:59&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=c2ee5e854f331300c8030fbf9310c7da"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-55032933</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>e39d7b08db49e780fe199236db961955</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166281d476b0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table>sc_req_item</table>
<target_name>OCIO SR Ser Manager RITM Query</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>c26f01aaa4f4e3807297cff851e23869</update_guid>
<update_guid_history>c26f01aaa4f4e3807297cff851e23869:-55032933,d34fa0df5b842300e9c54f657e66f9ef:-1086692489,fba253ebd7f313002faaa508acd7428f:-1143069003,e79053a30ff313004daa6758b575dc67:1178475382,531ea41bf2482b00369d446204169262:-2089834540,469c20d7f9482b00bd9e08a483314310:1599054565,dee4b940fa04a300601dd261f6010013:-2089834540,a6d3a188fdc0a300a06d983194fd74bf:-1086692489,5043a140cbc0a3003c3139a57b429af0:555579928,b823a94806c0a3004b38b76dc4cddd58:-1086692489,127165802d00a300388819c4102a4eed:-196259936,0e1a9dcc1acc630015889311ecaad900:2138603873,2f88518c0ccc63002c20a3a57642cff1:-1086692489,1f37194c92cc6300f0dee0aeeb6d4b04:1599054565,fba3198848cc6300173207692259d455:-2089834540,158351882bcc630054bcb5072b21a9e9:1599054565,507311b786b71300f9ab205b21d84e0e:-2089834540,1f4255b7827b53000a0541c8ff39b3a3:977565971,0071d9377d7b530066d070750a08b3a7:289712742,fbcecdf3f27b530095971dab94e0ea99:1999664041,1d5ec1b3907b5300ac1c4e09b854ab4f:1460602181,1bca8933737b5300681f170941ad513f:1933659903,1f5a4d33a17b5300c9727c4b3eb7ce57:-1128943460,e0d98533987b53005620e08252550a19:947968474,bc3909ff733b5300de95160de3c9c45e:930985608,338805ff173b5300e9b066c9066fc272:-1889270771,3ef6103bed371300870a0a2d6ae74048:1933659903,81aec43380371300c16d9f26e2059d9f:1933659903,275d44332e37130077771574b4cacb19:-637501328,895b3fa775f31300f1706ed6adb4b8a6:1133353356,e6f8f367ecf3130048767eec5300264a:160232382,70f83f271ef3130011a371193568e431:1896797199,5923e72f03731300decfab4890c6139b:-1143069003,eb141f6f27f35300c77ae09671f02a92:-1143069003,65f67d5facb7130074de58cc217d25eb:-1184638682,6976315f46b71300d571a541237039d3:-1641797054,cce1319bb4b713008df58143e3772705:-875328122,bb7f611b06b7130028ee8afdc005d063:232766552,3a2f2dd738b71300ba238c3cb7191d95:47275992,0fdee9d7acb713000d0530ad1395e93e:-1491012450,4513ce4e77f3130065d46556d08b09c6:-1184638682,47d0064e0bf313003d57d07077d21e18:-1583327985,dcd216d94d73130004a0ef446ec248b0:1178475382,e2cfc2997433130090592632f7b3ff55:1178475382,a4fe8a95a7731300eb73beb8f7649bbe:439481249,8a86320d8973130067ed0045aadb244c:-1440674356,8cb37a89fd73130042301afc4a9a2faf:-1352501530,29633a49e9731300e27a9f2d23dce90e:2039983751,2c123a49107313009a3aec6d1d9ffd9b:1379086862,d7bca6055a7313006fb2b980ed962b18:-1203402083,ceebeec17373130076e455c2bf4eb5f4:1379086862,b5aa22c1a6731300a2b3e20354ca766b:1867861004,f22a2681f4731300afeb9a256886e01f:1344022997,f4b8a64129731300a699ae0b5ab358d2:393847534,e938e241dc73130096beed5dd56f212d:-2043059321,b6772e01e1731300abe691b3678b756f:-363745553,371766011d7313004c9e655e91efe6f8:-1481616832,23d522cd17331300c36febab7bcb96a9:-292295177,bf256a4d85331300f547dbc978109924:-696293274,8bd3a64d40331300b540fcfd8338b87f:2127063439,842fda455b331300d61b3c52a71fcd6e:-1805121603</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>catalog_script_client_5c96f0f6db0f1300f72fe04a48961968</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;true&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;true&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="Update Contact Information (GAL)"&gt;ff863cb6db0f1300f72fe04a489619b0&lt;/cat_item&gt;&lt;cat_variable&gt;IO:d896f0f6db0f1300f72fe04a48961921&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;messages/&gt;&lt;name&gt;Update Form by Requested For&lt;/name&gt;&lt;order&gt;400&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Update the Form based on u_requested_for USER information
 * 
 * History
 * JIRA   Date         Developer       Description
 * -----  -----------  --------------  ------------------------
 * SB-### 6-July-2018  Munhwan Gim      Initial implementation  
 * SB-619 26-Aug-2018  Munhwan Gim      Bug Fix
 * SB-622 29-Aug-2018  Munhwan Gim      Bug Fix
 * SB-696 29-Aug-2018  Munhwan Gim      Bug Fix - hideFieldMsg 
 *
 * Copyright to BC Public Service, OCIO, Service Request Project
 **/
function onChange(control, oldValue, newValue, isLoading) {
   if (isLoading || newValue == '' || oldValue == newValue) {
      return;
   }
		
	// Remove the invalidation message first not to display more than once 
	g_form.hideFieldMsg('u_business_phone', true);	
	g_form.hideFieldMsg('u_mobile_phone', true);	
	g_form.hideFieldMsg('u_fax_number', true);	
	g_form.hideFieldMsg('u_pager', true);	
	g_form.hideFieldMsg('u_department', true);	
	g_form.hideFieldMsg('u_office', true);	
	g_form.hideFieldMsg('u_title', true);	
	g_form.hideFieldMsg('u_assistant', true);	
	
	var itemID = g_form.getUniqueValue();	
	
	var ga = new GlideAjax('OCIO_SR_HelperUtils');
	ga.addParam('sysparm_name', 'ajaxFtn_getUserItemById');
	ga.addParam('sysparm_src_sysid', newValue);
	ga.addParam('sysparm_item_sysid', itemID);
	ga.getXMLAnswer(cbFtn);
		
	function cbFtn(answer) {
		if (answer) {
			var retObj = JSON.parse(answer);
			
			g_form.setValue('u_organization', retObj.company);
			
			g_form.setValue('u_city',  retObj.city, retObj.city); 
			g_form.setValue('u_address', retObj.street, retObj.street); 
			g_form.setValue('u_postal_code', retObj.zip, retObj.zip);

			// Validate Department	
			var departmentMaxLength = 64;
			if (retObj.u_ad_department.length &lt;= departmentMaxLength) {
				g_form.setValue('u_department', retObj.u_ad_department, retObj.u_ad_department);  
			} else {
				var departmentTruncated = retObj.u_ad_department.substring(0, departmentMaxLength);
				g_form.setValue('u_department', departmentTruncated, departmentTruncated);  
				g_form.showFieldMsg('u_department', 'Maximum length ' + departmentMaxLength + ' characters. ' + retObj.u_ad_department, "error");
			}

			// Validate Office
			var officeMaxLength = 128;
			if (retObj.u_delivery_office.length &lt;= officeMaxLength) {
				g_form.setValue('u_office', retObj.u_delivery_office, retObj.u_delivery_office);  
			} else {
				var officeTruncated = retObj.u_delivery_office.substring(0, officeMaxLength);
				g_form.setValue('u_office', officeTruncated, officeTruncated);  
				g_form.showFieldMsg('u_office', 'Maximum length ' + officeMaxLength + ' characters. ' + retObj.u_delivery_office, "error");
			}

			// Validate Title
			var titleMaxLength = 64;
			if (retObj.title.length &lt;= titleMaxLength) {
				g_form.setValue('u_title', retObj.title, retObj.title);  
			} else {
				var titleTruncated = retObj.title.substring(0, titleMaxLength);
				g_form.setValue('u_title', titleTruncated, titleTruncated);  
				g_form.showFieldMsg('u_title', 'Maximum length ' + titleMaxLength + ' characters. ' + retObj.title, "error");
			}

			// Validate Assistant
			var assistantMaxLength = 76;
			if (retObj.u_assistant.length &lt;= assistantMaxLength) {
				g_form.setValue('u_assistant', retObj.u_assistant, retObj.u_assistant);  
			} else {
				var assistantTruncated = retObj.u_assistant.substring(0, assistantMaxLength);
				g_form.setValue('u_assistant', assistantTruncated, assistantTruncated);  
				g_form.showFieldMsg('u_assistant', 'Maximum length ' + assistantMaxLength + ' characters. ' + retObj.u_assistant, "error");
			}			

			// Set hidden varaibel for sc_item_request
			var sc_item_request_display_name = retObj.sc_cat_item_name + ' for ' + retObj.username;
			g_form.setValue('sc_item_request_display_name', sc_item_request_display_name, sc_item_request_display_name);			

			// Set Phone Number and set validation msg if any
			var invalidMsgPhoneDefault = 'Please enter 10 digit phone number.';
			var invalidMsgPhoneExtensionDefault = invalidMsgPhoneDefault + ' Extensions are entered as "ext" followed by 1 to 4 digits.';
			var invalidMsgToDisplay = '';
			if (retObj.bizPhoneInvalid != '') {
				g_form.setValue('u_business_phone','');
				invalidMsgToDisplay = invalidMsgPhoneExtensionDefault + ' ' + retObj.bizPhoneInvalid;
				g_form.showFieldMsg('u_business_phone', invalidMsgToDisplay, "error");
			} else {
				g_form.setValue('u_business_phone', retObj.phone, retObj.phone);
			}
			if (retObj.mobilePhoneInvalid != '') {
				g_form.setValue('u_mobile_phone','');
				invalidMsgToDisplay = invalidMsgPhoneDefault + ' ' + retObj.mobilePhoneInvalid;
				g_form.showFieldMsg('u_mobile_phone', invalidMsgToDisplay, "error");
				

			} else {
				g_form.setValue('u_mobile_phone', retObj.mobile_phone, retObj.mobile_phone);
			}
			if (retObj.faxNumberInvalid != '') {
				g_form.setValue('u_fax_number','');
				invalidMsgToDisplay = invalidMsgPhoneDefault + ' ' + retObj.faxNumberInvalid;
				g_form.showFieldMsg('u_fax_number', invalidMsgToDisplay, "error");
				

			} else {
				g_form.setValue('u_fax_number', retObj.u_fax_number, retObj.u_fax_number);
			}
			if (retObj.pagerInvalid != '') {
				g_form.setValue('u_pager','');
				invalidMsgToDisplay = invalidMsgPhoneDefault + ' ' + retObj.pagerInvalid;
				g_form.showFieldMsg('u_pager', invalidMsgToDisplay, "error");
			    

				
			} else {
				g_form.setValue('u_pager', retObj.u_pager, retObj.u_pager); 	
			}				
		}
	} 
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;James.Jose&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-07-05 18:35:04&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;5c96f0f6db0f1300f72fe04a48961968&lt;/sys_id&gt;&lt;sys_mod_count&gt;44&lt;/sys_mod_count&gt;&lt;sys_name&gt;Update Form by Requested For&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_5c96f0f6db0f1300f72fe04a48961968&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 01:53:02&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
<payload_hash>-560627979</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>e79d7b08db49e780fe199236db961951</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641ed9c1e0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Update Form by Requested For</target_name>
<type>Catalog Client Scripts</type>
<update_domain>global</update_domain>
<update_guid>5373c704fc016780cb3e5aa919557cf3</update_guid>
<update_guid_history>5373c704fc016780cb3e5aa919557cf3:-560627979,f7ff36806e0167802d9faa6b9e408261:1130729674,10df728047016780c16ec4bd51775db2:-560627979,3d126e855f102300e2130eb98a84d0aa:1687983676,73b01674bbd0230044e6a39c6096153a:133317294,489056740ad0230069a986cf0d2c05ec:1705967380,b4e9c5a0da1c2f00e8ae40db84910d86:-904657822,bfa9c9a04e1c2f0077a4257d36a14660:1810378471,cee845a0d81c2f00d2d787a98d05f485:-904657822,96c845a07a1c2f00579a7289e852b92d:-992850467,e29881a0751c2f00cb3ed317b14d164f:-1379055092,067dd70c12502300b0c2e04eaa298733:638991804,4491116bf8006300951c2b64eb2c17b0:187582587,4f81dd2b410063002e2ca1a3f06e7db8:-475712386,657f85e71c006300bc59e6247845b7d3:187582587,bafe8da79300630081bd717f09a8c1d2:1794161333,7b4e09a737006300f67ef3e65fb42561:959634773,a0c98da389006300b64a5aa5d31b517c:43528443,ac48fc2beccc230089264b414e847636:93610978,3b38742be7cc2300e28d1d3919a44cd9:1028685503,d1287c2bbccc230049e8b1af21f9daa7:93610978,cea7b42bf1cc230086496162a6bdbc91:820550248,ee87302b34cc23007db7aec0eb2043e5:1991757000,ba37302b2fcc2300c3d661ec099d2d96:820550248,c0d6f8e75dcc23006c7539a4d5537c8c:-156041465,47e530e7afcc230099e3d569ecf0cb7b:2090886687,b485f4a7decc230027aec0572e2650b3:-960745729,6e94b867fdcc2300894684430a15d248:2133287477,7ac3f46706cc2300b393f9c8613597db:1744499945,20946d5a2b531300b6322de0eba7f50d:1097917574,40fe4d1ae6131300bd696f8993f0e3c0:-1016733615,f14e855eb01313003f297fb6f68707d7:-209305004,a3bc0d1a4a131300b922c1bab35a3aa3:-1839672701,0fede2acdb802300ff1fad8ad5552e32:-1308992061,10ede2ec0c802300935442b4f4eb2218:-360685187,39ad6aac618023001bd6aa7013855182:-1748032223,db90cd1ccc0023001cdc8dc359dcfeb0:1191137615,50f92c2fc9231300098eb036e3eab807:-535820275,dd82872af257d3001f6871df0b4032e9:928618771,a92143e64857d3009b57360d57b10e9b:-82815949,c3bcf351b55713000a000c31699291f9:687113123,14acb351015713001d2bb288f04ea843:123731799,c67c3711f85713005feb8b5097cb7fe2:687113123,a65cfb11e95713008c4e9dd5a1de172e:123731799,f199ffd9c1171300fc845d5ecf2ab2da:317865922,edd4ffd9291713002815028af82dae3a:-274645105,a45b4f955ad31300cc638dec42e5927e:-498121115,06328b9155d31300cff3ae462498a87d:-243775813,5af9329df1931300f52bf8039f434aae:-566602376,5da7b61572931300b7e5ee19d793725b:-1200937023,dc96f0f6b60f130016c2b8c14cc5446a:28901239</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sysevent_script_action_86b18dc8dbb8eb4050479eb6db9619dd</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sysevent_script_action"&gt;&lt;sysevent_script_action action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;condition_script/&gt;&lt;description/&gt;&lt;event_name&gt;catalog.attachmentCreator&lt;/event_name&gt;&lt;name&gt;OCIO SR Generate Task Attachment&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[/**
 * Add attachment to the service catalog task for the specific service catalog items fulfillment
 *
 *
 * Pre-requisites:
 * 1. Service Catalog Item needs to configure a variable names as 'hidden_sc_item_name_for_attachment'  for this business rule - (see Switch staement)
 *
 * History
 * JIRA   Date         Developer               Description
 * -----  -----------  --------------          ------------------------
 * SB-814  21-Sept-2018  Mathew Kuriakose      Initial implementation (Production Emergency Fix)
                                               Replaced business rule OCIO SR Add Attachment                                                                    as the business rule was not executed correctly for users with                                                    Service Manager role 
 *
 * Copyright to BC Public Service, OCIO, Service Request
 **/
//gs.log("Event_fired "+event.parm1);


        var task_reference = new GlideRecord('sc_task');
		task_reference.addQuery('sys_id',event.parm1);
		task_reference.query();
		if (task_reference.next()) {
	
	var request_itemRef = task_reference.request_item.getRefRecord();
	var cat_itemRef = request_itemRef.cat_item.getRefRecord();
	
	var sc_item_number = request_itemRef.getValue('number');
	var userNameRequestedFor = getUserNameById(request_itemRef.variables.u_requested_for);
	
	// Need single-quote for make SWITCH statment work. Otherwise use toString() with double-quote on SWITCH - CASE
	var sc_item_name = cat_itemRef.name+'';
	
	var scTaskId = task_reference.getValue("sys_id");
	var scItemVars = request_itemRef.variables;
	var dataToAttach = '';
	
	var HIDDEN_SC_ITEM_NAME = scItemVars.hidden_sc_item_name_for_attachment+'';
	var fileName = '';
	
	// Cases must be matched with sc_cat_item name to be handled specifically. This block might be refactored as more service is implemented.
	switch (HIDDEN_SC_ITEM_NAME) {
		case 'Update Contact Information':
		fileName = 'GALData_'+sc_item_number+'.json';
		
		dataToAttach = getGALData(userNameRequestedFor, task_reference.short_description, task_reference.description, scItemVars);
		addAttachmentToServiceCatalogTask(task_reference, dataToAttach, scTaskId, fileName, 'application/json');
		break;
		case 'Change Account':
		fileName = 'ChangeAccountData_'+sc_item_number+'.json';
		var iWantToSelected = request_itemRef.variables.u_i_want_to;
		
		dataToAttach = getChangeAccountData(iWantToSelected, userNameRequestedFor, scItemVars);
		addAttachmentToServiceCatalogTask(task_reference, dataToAttach, scTaskId, fileName, 'application/json');
		break;
		default:
		gs.info('&gt;&gt;&gt;DEBUG:: OCIO SC TASK Add Attachment: Do not need to add attachment when a new sc task is inserted. The Service Catalog Item = (' + HIDDEN_SC_ITEM_NAME + ')');
		break;
	}
		}
	/**
 	* Add attachment for the table, sc_task, with the attachment data
 	* @param: task_reference: service catalog task (object)
 	* @param: attachmentData: attachment data
 	* @param: scTaskId: attachment table_sys_id value to be assigned
 	* @param: fileName: attachment file name
 	* @param: contentType: attachment content type, which should be matached with the content of 'attachmentData'
 	* @return: none
 	*/
	function addAttachmentToServiceCatalogTask(task_reference, attachmentData, scTaskId, fileName, contentType) {
		// Set Attachment Inputs
		var gsAttach = new GlideSysAttachment();
		var idAttached = gsAttach.write(task_reference, fileName, contentType, attachmentData);
		
		// Set table_sys_id on the attachment
		var att = new GlideRecord('sys_attachment');
		att.addQuery('sys_id', idAttached);
		att.query();
		if (att.next()) {
			att.table_sys_id = scTaskId;
			att.update();
		}
		
	}
	
	/**
 	* Generate JSON for GAL Update Request mapped with JSON Schema from the IBM
 	* @param: userID: sys_id of the user table
 	* @return: user name
 	*/
	function getUserNameById( userID ) {
		var grUser = new GlideRecord('sys_user');
		grUser.addQuery('sys_id', userID);
		grUser.query();
		
		var userName = '';
		
		if (grUser.next()) {
			userName = grUser.user_name;
		} else {
			gs.warn('&gt;&gt;&gt; DEBUG: No user name found for a ' + userID);
		}
		
		return userName;
	}
	
	/**
 	* Generate JSON for GAL Update Request mapped with JSON Schema from the IBM
 	* @param: reqFor: IDIR user name (string)
 	* @param: shortDesc: service catalog Item short description (string)
 	* @param: desc: service catalog Item description (string)
 	* @param: scItem: service catalog Item variables object
 	* @return: json string
 	*/
	function getGALData(reqFor, shortDesc, desc, scItem) {
		return '{'
			+		'"GALUpdateRequest": {'
				+			'"IDIR": "' +  reqFor + '",'
				+			'"GALOrganizationInfo": {'
					+				'"adminNote": "' + desc + '",'
					+				'"assistant": "' + scItem.u_assistant + '",'
					+				'"BCGovInfo": "' + "" + '",'
					+				'"company": "' +  scItem.u_organization.name + '",'
					+				'"department": "' + scItem.u_department + '",'
					+				'"description": "' + shortDesc + '",'
					+				'"jobTitle": "' + scItem.u_title + '",'
					+				'"manager": "' +  "" + '",'
					+				'"office": "' + scItem.u_office + '"'
					+			'},'
					+			'"GALContactInfo": {'
						+				'"city": "' + scItem.u_city + '",'
						+				'"country": "Canada",'
						+				'"fax": "' + scItem.u_fax_number + '",'
						+				'"mobile": "' + scItem.u_mobile_phone + '",'
						+				'"pager": "' + scItem.u_pager + '",'
						+				'"postalCode": "' + scItem.u_postal_code + '",'
						+				'"province": "BC",'
						+				'"street": "' + scItem.u_address + '",'
						+				'"telephoneNotes": "' + "" + '",'
						+				'"telephoneNumber": "' + scItem.u_business_phone + '"'
						+			'}'
						+		'}'
						+'}';
					}
					
					/**
 					* Generate JSON for Change Account Request mapped with JSON Schema from the IBM
 					* @param: optionSelected: IDIR user name (string)
 					* @param: reqFor: IDIR user name (string)
 					* @param: scItem: service catalog Item variables object
 					* @return: json string
 					*/
					function getChangeAccountData(optionSelected, reqFor, scItem) {
						
						var TIME_PORTION_APPENDED = 'T17:00:00-00:00';
						var OPTION = optionSelected+'';
						var json = '';
						
						switch (OPTION) {
							case 'u_change_account_expiry_date':
							json = '{'
								+ '"userExpiryDateChange": {'
									+        '"IDIR": "' +  reqFor + '",'
									+        '"expiryDate": "' + scItem.u_account_expiry_date + TIME_PORTION_APPENDED + '"'
									+	'}'
									+'}';
									break;
									case 'u_remove_account_expiry_date':
									json = '{'
										+ '"userExpiryDateChange": {'
											+        '"IDIR": "' +  reqFor + '",'
											+        '"expiryDate": "1601-01-01T00:00:00-00:00"'
											+	'}'
											+'}';
											break;
											case 'u_place_hold':
											json = '{'
												+ '"removeUserAccountHold": {'
													+        '"IDIR": "' +  reqFor + '",'
													+        '"effectiveDate": "' + scItem.u_effective_date + TIME_PORTION_APPENDED + '"'
													+	'}'
													+'}';
													break;
													case 'u_remove_hold':
													json = '{'
														+ '"userAccountHold": {'
															+        '"IDIR": "' +  reqFor + '",'
															+        '"effectiveDate": "' + scItem.u_effective_date + TIME_PORTION_APPENDED + '"'
															+	'}'
															+'}';
															break;
															default:
															gs.info('&gt;&gt;&gt;DEBUG:: OCIO SC TASK Add Attachment: Change Account: The selected IWantTo Option = (' + optionSelected + ')');
															break;
														}
														
														return json;
													}
]]&gt;&lt;/script&gt;&lt;synchronous&gt;false&lt;/synchronous&gt;&lt;sys_class_name&gt;sysevent_script_action&lt;/sys_class_name&gt;&lt;sys_created_by&gt;MKURIAKOSE&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-09-22 06:10:39&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;86b18dc8dbb8eb4050479eb6db9619dd&lt;/sys_id&gt;&lt;sys_mod_count&gt;12&lt;/sys_mod_count&gt;&lt;sys_name&gt;OCIO SR Generate Task Attachment&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sysevent_script_action_86b18dc8dbb8eb4050479eb6db9619dd&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;MKURIAKOSE&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-05 05:02:17&lt;/sys_updated_on&gt;&lt;/sysevent_script_action&gt;&lt;/record_update&gt;</payload>
<payload_hash>1837954384</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>e79d7b08db49e780fe199236db961954</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166429addf90000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table>catalog.attachmentCreator</table>
<target_name>OCIO SR Generate Task Attachment</target_name>
<type>Script Action</type>
<update_domain>global</update_domain>
<update_guid>a7ceeb80d981678099c5843eb8b7d2f8</update_guid>
<update_guid_history>a7ceeb80d981678099c5843eb8b7d2f8:1837954384,7e4c85d0bb342f4033398a1aeba914b4:-454194729,407b41d009342f407b0b75fe908554c1:-716159426,24f88110f6342f40eed00b3ff019f1c9:-454194729,8ce9928c0f7ceb40df439b5a32061f2a:1327593928,47f8568c747ceb40b955e1189e0bf195:1440198954,a0d3414ceeb8eb40532a820e6a15e5c6:-1661170774,e023c90cd9b8eb406c0cdd2a0cae3a9a:-1724535606,f962810c51b8eb4055d6613ebc886d1b:-1661170774,2b02c10c19b8eb4005cf069d808c3554:1008317863,73d1410cd4b8eb40c6266528f2b86f16:2112409631,4ac1410c3bb8eb409a5f1024e5dbe007:1769496410</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_7f86b0f6db0f1300f72fe04a4896199d</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Update Contact Information (GAL)">ff863cb6db0f1300f72fe04a489619b0</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value/><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>false</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_organization</name><order>400</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For Organization</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>core_company</reference><reference_qual/><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:02</sys_created_on><sys_id>7f86b0f6db0f1300f72fe04a4896199d</sys_id><sys_mod_count>2</sys_mod_count><sys_name>Requested For Organization</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_7f86b0f6db0f1300f72fe04a4896199d</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 01:51:15</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>simple</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=7f86b0f6db0f1300f72fe04a4896199d"/><fx_price action="delete_multiple" query="id=7f86b0f6db0f1300f72fe04a4896199d"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>7f86b0f6db0f1300f72fe04a4896199d</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:02</sys_created_on><sys_id>7786b0f6db0f1300f72fe04a4896199f</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-05 18:35:02</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>7f86b0f6db0f1300f72fe04a4896199d</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-07-05 18:35:02</sys_created_on><sys_id>3f86b0f6db0f1300f72fe04a4896199e</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-07-05 18:35:02</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>621461288</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>eb9d7b08db49e780fe199236db961953</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16641ebf94d0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For Organization</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>5d13c704dc0167800d95857e93167aec</update_guid>
<update_guid_history>5d13c704dc0167800d95857e93167aec:621461288,a69efe00b4016780dd070d69b2d928c7:621461288,7786b0f63c0f1300b98bd18620e593a2:564327842,59f8c73ab5afdb00461cd927759f38bf:-1196443323,7786b0f63c0f1300b98bd18620e593a2:564327842</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>item_option_new_33ec31bbdb961300f72fe04a489619bc</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="item_option_new"><item_option_new action="INSERT_OR_UPDATE"><active>true</active><attributes/><cat_item display_value="Reset Voice Mail Password">fa2cbd7bdb961300f72fe04a4896197a</cat_item><category/><choice_direction>down</choice_direction><choice_field/><choice_table/><create_roles/><default_html_value/><default_value/><delete_roles/><delivery_plan/><description/><display_title>false</display_title><do_not_select_first>false</do_not_select_first><dynamic_default_value/><dynamic_ref_qual/><example_text/><field/><global>true</global><help_tag>More information</help_tag><help_text/><include_none>false</include_none><instructions/><layout>normal</layout><list_table/><lookup_label/><lookup_price/><lookup_table/><lookup_unique>false</lookup_unique><lookup_value/><macro/><mandatory>true</mandatory><map_to_field>false</map_to_field><mask_use_confirmation>false</mask_use_confirmation><mask_use_encryption>false</mask_use_encryption><name>u_requested_for</name><order>200</order><price_if_checked>0</price_if_checked><pricing_implications>false</pricing_implications><question_text>Requested For</question_text><read_roles/><rec_lookup_price/><rec_price_if_checked>0</rec_price_if_checked><record/><record_producer_table/><reference>sys_user</reference><reference_qual>javascript: new OCIO_SR_CatalogHelper().Sector_Finder();</reference_qual><reference_qual_condition/><scale_max>5</scale_max><scale_min>0</scale_min><show_help>false</show_help><show_help_on_load>false</show_help_on_load><sp_widget/><summary_macro/><sys_class_name>item_option_new</sys_class_name><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:31:28</sys_created_on><sys_id>33ec31bbdb961300f72fe04a489619bc</sys_id><sys_mod_count>6</sys_mod_count><sys_name>Requested For</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_scope display_value="Global">global</sys_scope><sys_update_name>item_option_new_33ec31bbdb961300f72fe04a489619bc</sys_update_name><sys_updated_by>MKURIAKOSE</sys_updated_by><sys_updated_on>2018-10-05 00:24:08</sys_updated_on><table/><tooltip/><type>8</type><ui_page/><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>advanced</use_reference_qualifier><variable_name/><variable_set/><variable_width/><visibility>1</visibility><visible_bundle>true</visible_bundle><visible_guide>true</visible_guide><visible_standalone>true</visible_standalone><visible_summary>true</visible_summary><write_roles/></item_option_new><sys_translated_text action="delete_multiple" query="documentkey=33ec31bbdb961300f72fe04a489619bc"/><fx_price action="delete_multiple" query="id=33ec31bbdb961300f72fe04a489619bc"/><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>price_if_checked</field><id>33ec31bbdb961300f72fe04a489619bc</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:31:28</sys_created_on><sys_id>436df5bbdb961300f72fe04a489619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-06-01 19:31:28</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price><fx_price action="INSERT_OR_UPDATE"><amount>0</amount><currency display_value="USD">USD</currency><field>rec_price_if_checked</field><id>33ec31bbdb961300f72fe04a489619bc</id><parent/><reference_amount>0</reference_amount><reference_currency display_value="USD">USD</reference_currency><sys_created_by>James.Jose</sys_created_by><sys_created_on>2018-06-01 19:31:28</sys_created_on><sys_id>0b6df5bbdb961300f72fe04a489619e1</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>James.Jose</sys_updated_by><sys_updated_on>2018-06-01 19:31:28</sys_updated_on><table>item_option_new</table><type>calculated</type></fx_price></record_update>]]></payload>
<payload_hash>-2112841313</payload_hash>
<remote_update_set display_value="OCIO SR 2018 10 05 a">6b9d7b08db49e780fe199236db961950</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>JAJOSE</sys_created_by>
<sys_created_on>2018-10-05 06:07:01</sys_created_on>
<sys_id>ef9d7b08db49e780fe199236db961952</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166419c367c0000001</sys_recorded_at>
<sys_updated_by>JAJOSE</sys_updated_by>
<sys_updated_on>2018-10-05 06:07:01</sys_updated_on>
<table/>
<target_name>Requested For</target_name>
<type>Variable</type>
<update_domain>global</update_domain>
<update_guid>c12fee44fccd2780eac638ad534176b5</update_guid>
<update_guid_history>c12fee44fccd2780eac638ad534176b5:-2112841313,8ec1ae0c1d8d2780efa272a2e37c50e7:-197427198,a2302ac87a8d278045418d5bae9b9855:1876702139,572026c8c28d2780a81ad331f550fa83:-937555258,9d0c0092fe782380bcfcfc5bd62a39e1:1876702139,06eeb729c75f1300de8530e98e7adbed:-491411369,436d3dbb309613003b1895945f273538:1074419606</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
</unload>
